

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head><meta http-equiv="X-UA-Compatible" content="IE=7" /><meta name="robots" content="index,follow" />
<meta name="description" content="The official NHibernate community site. Download NHibernate. Read blogs. Contribute to the NHibernate Wiki. Find reference documentation." />
<meta name="keywords" content="NHibernate, NHibernate Contrib, community, Burrow, Downloads" />
<meta name="GENERATOR" content="CommunityServer 2008.5 SP1 (Build: 31106.3070)" />
<link rel="shortcut icon" type="image/ico" href="../../../favicon.ico" />
<link rel="alternate" type="application/rss+xml" title="Identity Field, Equality and Hash Code (RSS 2.0)" href="rss.aspx"  />
<link rel="alternate" type="application/rss+xml" title="Patterns &amp; Practices (RSS 2.0)" href="../rss.aspx"  />
<link rel="alternate" type="application/rss+xml" title="gabriel.schenker&#39;s Announcements (RSS 2.0)" href="../../../members/gabriel.schenker/announcements/rss.aspx"  />
<link rel="alternate" type="application/rss+xml" title="gabriel.schenker&#39;s Comments (RSS 2.0)" href="../../../members/gabriel.schenker/comments/rss.aspx"  />
<link rel="alternate" type="application/rss+xml" title="gabriel.schenker&#39;s Activities (RSS 2.0)" href="../../../members/gabriel.schenker/activities/rss.aspx"  />
<link rel="alternate" type="application/rss+xml" title="gabriel.schenker&#39;s Friends Activity (RSS 2.0)" href="../../../members/gabriel.schenker/activities/friendrss.aspx"  />

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <style type="text/css"> body { font-size: 84%; } </style>
        <link rel="stylesheet" href="../../../themes/hawaii/style/Common.css" type="text/css" media="screen,print" />
        <link rel="stylesheet" href="../../../themes/hawaii/style/common_print.css" type="text/css" media="print" />
        
    
    <link rel="stylesheet" href="../../../Themes/hawaii/style/wiki.css" type="text/css" media="screen,print" />
	

        <link rel="stylesheet" href="../../../themes/hawaii/style/DynamicStyle.aspx.css" type="text/css" media="screen" />
        <!--[if lte IE 6]>
            <link rel="stylesheet" href="/themes/hawaii/style/ie6.css" type="text/css" media="screen" />
        <![endif]-->
    <meta name="google-site-verification" content="u9qihpHbzSFdf2ypCUvCQrj9IJkANGzorC8zMk0859M" />
<title>
	Comments: Identity Field, Equality and Hash Code - NHibernate Forge
</title></head>
	<body>
		<form name="aspnetForm" method="post" action="comments.aspx.html" id="aspnetForm">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTcyMTQ0MzUxNmQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFMGN0bDAwJGN0bDAwJHNyJHNyJGN0bDAwJGN0bDAwJFRpdGxlQmFyU2VhcmNoVGV4dAbLC+sYQjys4j2ezXalX8SFgv2N" />
</div>


<script src="../../../WebResource.axd%3Fd=0gbcOAOlbWsHyCtP1tLKZQbpxrEkhg31E8L04T1x-hMLrsMonvmUNQvxBohSywWHueFgWT841lW9e5k7Gp2DbPsOLeN3Sv3SB7czfVSlQGxYOHnJcLlKfh3v9vlcjJ9ggvps0fjahw73J3SVYQmGvS0rXng1&amp;t=634395149500000000" type="text/javascript"></script>
<script src="../../../WebResource.axd%3Fd=qXX_qxw7Y60qjc1NsxHnuIWUCy9JxjEUKLrY5KEQyuYhKzv3UmRPH805gTXU5edfSsLl7PHTIDuZbzGOp5UYEWeQ6anyqFa-m5TiNnZiD5MOrgiKWAZBgPyJ267gdCbk0_TpK2BaAhLvEgyM28dt9SYQ2UM1&amp;t=634395149500000000" type="text/javascript"></script>
<script src="../../../WebResource.axd%3Fd=c5kkseX-7hUDg441H_iVoy5ws7YKvwS4KliHEKHuRl5UdJkUU5Jbdf2sxzCcbfyn6sqe17DzqhSTfAyV8nyJKMHhScl2IzjSz37RVYryN9Omis3K0NCj_OJ4fHZH3n9_IPBlNLVyYL45kjJL_zhydrkKTi3FfxaImDeS_1JZIO7o9iFs0&amp;t=634395149500000000" type="text/javascript"></script>
						

			

		    
		        <div id="CommonHeader">
		            <div class="Common">
		                <div id="CommonHeaderTitleArea">
		                    <table cellpadding="0" cellspacing="0" border="0"><tr valign="middle">
		                        <td><div style="margin-right: 10px;"><img src="../../../cfs-file_ashx/key/CommunityServer.Components.SiteFiles/logos/LogoNH.gif" alt="" style="border-width:0px;" /></div></td>
		                        <td>
		                            <div class="CommonHeaderTitle">NHibernate Forge</div>
		                            <div class="CommonHeaderTitleDescription">The official new home for the NHibernate for .NET community</div>
		                        </td>
		                    </tr></table>
		                </div>
		                <div id="CommonHeaderUserArea">
		                    <table cellpadding="0" cellspacing="0" border="0"><tr valign="top"><td>
                                <div id="CommonHeaderUserContent">
                                    <div id="CommonHeaderUserWelcome">
                                        
        <a href="../../../login.aspx%3FReturnUrl=%252Fwikis%252Fpatternsandpractices%252Fidentity-field-equality-and-hash-code%252Fcomments.aspx.html">Sign in </a>
         | <a href="../../../user/CreateUser.aspx%3FReturnUrl=.html">Join</a>
        | <a href="http://dev.communityserver.com/r.ashx?K&amp;siteurl=wikis.wiki_Page_Comments">Help</a>
     


                                    </div>
                                </div>
                            </td></tr></table>
                        </div>
                    </div>
                </div>
                <div id="CommonNavigation">
                    <div class="Common"><div class="Inner">
                        <ul>
                                
                                <li><a href="../../../index.html">Home</a></li>
                            
                                
                                <li><a href="../../../blogs/nhibernate.html">Blog</a></li>
                            
                                <li><a class="Selected" href="../../index.html">Wikis</a></li>
                                
                            
                                
                                <li><a href="../../../groups/index.html">Groups</a></li>
                            
                                
                                <li><a href="../../../doc/nh/en/index.html">Reference</a></li>
                            
                                
                                <li><a href="http://nhibernate.jira.com">Issue tracker</a></li>
                            
                                
                                <li><a href="https://github.com/nhibernate/nhibernate-core">Source Code</a></li>
                            </ul>
                        <div style="clear: both;"></div>
                     </div></div>
                </div>
                
                        <div id="CommonNavigation2">
                            <div class="Common"><div class="Inner">
                                <ul>
                    
                        
                        <li><a href="../../general/default.aspx.html">General</a></li>
                    
                        
                        <li><a href="../../howtonh/default.aspx.html">How to</a></li>
                    
                        <li><a class="Selected" href="../default.aspx.html">Patterns&amp;Practices</a></li>
                        
                    
                                </ul>
                            </div></div>
                        </div>
                    
                <div id="CommonNavigationShadow">
                    
    
    <div class="CommonBreadCrumbArea"><div class="Common">
        <a href="../../index.html">Wikis</a>
        &raquo;
        <a href="../default.aspx.html">Patterns &amp; Practices</a>
        &raquo;
        <a href="../identity-field-equality-and-hash-code.aspx.html">Identity Field, Equality and Hash Code</a>
        &raquo;
        <a href="comments.aspx.html">Comments</a>
    </div></div>


                </div>
		    
                        
            <div class="Common">
            
                
            
                <div id="CommonSearch">
                    
    
        
                <div class="CommonSearchArea">
                    <div class="CommonSearchRoundTop"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                    <div class="CommonSearchContent"><div class="CommonSearchContentInner">
                        <input name="ctl00$ctl00$sr$sr$ctl00$ctl00$TitleBarSearchText" type="text" maxlength="64" size="15" id="ctl00_ctl00_sr_sr_ctl00_ctl00_TitleBarSearchText" onclick="if(this.defaultValue==this.value) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;" onkeydown="return KeyDownHandlerctl00_ctl00_sr_sr_ctl00_ctl00_TitleBarSearchButton(event);" /><input type="submit" name="ctl00$ctl00$sr$sr$ctl00$ctl00$TitleBarSearchButton" value="Â " id="ctl00_ctl00_sr_sr_ctl00_ctl00_TitleBarSearchButton" class="CommonSearchButton" />
                    </div></div>
                    <div class="CommonSearchRoundBottom"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                </div>
            
    

                </div>
                <div id="CommonTitle">
                    
    
    <h1 class="CommonTitle">Comments: Identity Field, Equality and Hash Code</h1>


                </div>
                <div style="clear: both;"></div>
			    <div id="CommonSidebarRight">
			        
    
	<div class="CommonSidebar">
	    
	    
	        
	                <div class="CommonContentBox">
                        <h4 class="CommonContentBoxHeader">Shortcuts</h4>
	                    <div class="CommonContentBoxContent">
	            <ul class='CommonSidebarList'><li><a href="../default.aspx.html">Home</a></li><li><a href="rss.aspx">RSS feed for page</a></li></ul>
				        </div>
				        
			        </div>
	            
	    
	        
	    
	        
	                <div class="CommonContentBox">
                        <h4 class="CommonContentBoxHeader">Wiki Page Hierarchy</h4>
	                    <div class="CommonContentBoxContent">
	            <div><ul class="CommonHierarchicalList"><li><a href="../nhibernate-and-the-unit-of-work-pattern.aspx.html">NHibernate and the Unit of Work Pattern</a></li><li><a href="../identity-field-equality-and-hash-code.aspx.html" class="Selected">Identity Field, Equality and Hash Code</a></li></ul></div>
				        </div>
				        
			        </div>
	            
	    
	        
	                <div class="CommonContentBox">
                        <h4 class="CommonContentBoxHeader">Pages</h4>
	                    <div class="CommonContentBoxContent">
	            <div><ul class="CommonHierarchicalList"><li><a href="../nhibernate-and-the-unit-of-work-pattern.aspx.html">NHibernate and the Unit of Work Pattern</a></li><li><a href="../identity-field-equality-and-hash-code.aspx.html" class="Selected">Identity Field, Equality and Hash Code</a></li></ul></div>
				        </div>
				        
			        </div>
	            
	    
	        
	                <div class="CommonContentBox">
                        <h4 class="CommonContentBoxHeader">Tags</h4>
	                    <div class="CommonContentBoxContent">
	            <ul class="CommonSidebarTagCloud">
<li class="CommonTag2"><a href="../tags/Architecture/default.aspx.html" rel="tag">Architecture</a></li>
<li class="CommonTag6"><a href="../tags/Audit/default.aspx.html" rel="tag">Audit</a></li>
<li class="CommonTag6"><a href="../tags/Concurrency/default.aspx.html" rel="tag">Concurrency</a></li>
<li class="CommonTag6"><a href="../tags/Configuration/default.aspx.html" rel="tag">Configuration</a></li>
<li class="CommonTag6"><a href="../tags/convention+over+configuration/default.aspx.html" rel="tag">convention over configuration</a></li>
<li class="CommonTag6"><a href="../tags/Conversation/default.aspx.html" rel="tag">Conversation</a></li>
<li class="CommonTag6"><a href="../tags/entity+name/default.aspx.html" rel="tag">entity name</a></li>
<li class="CommonTag3"><a href="../tags/events/default.aspx.html" rel="tag">events</a></li>
<li class="CommonTag6"><a href="../tags/Filters/default.aspx.html" rel="tag">Filters</a></li>
<li class="CommonTag2"><a href="../tags/FluentNH/default.aspx.html" rel="tag">FluentNH</a></li>
<li class="CommonTag6"><a href="../tags/IIdentifierGenerator/default.aspx.html" rel="tag">IIdentifierGenerator</a></li>
<li class="CommonTag6"><a href="../tags/Interceptor/default.aspx.html" rel="tag">Interceptor</a></li>
<li class="CommonTag6"><a href="../tags/IoC+container/default.aspx.html" rel="tag">IoC container</a></li>
<li class="CommonTag2"><a href="../tags/IUserType/default.aspx.html" rel="tag">IUserType</a></li>
<li class="CommonTag3"><a href="../tags/lazy+loading/default.aspx.html" rel="tag">lazy loading</a></li>
<li class="CommonTag6"><a href="../tags/listener/default.aspx.html" rel="tag">listener</a></li>
<li class="CommonTag6"><a href="../tags/log/default.aspx.html" rel="tag">log</a></li>
<li class="CommonTag6"><a href="../tags/logging/default.aspx.html" rel="tag">logging</a></li>
<li class="CommonTag1"><a href="../tags/Mapping/default.aspx.html" rel="tag">Mapping</a></li>
<li class="CommonTag6"><a href="../tags/Mapping+by+code/default.aspx.html" rel="tag">Mapping by code</a></li>
<li class="CommonTag1"><a href="../tags/Nhibernate/default.aspx.html" rel="tag">Nhibernate</a></li>
<li class="CommonTag6"><a href="../tags/Nhibernate+Documentation/default.aspx.html" rel="tag">Nhibernate Documentation</a></li>
<li class="CommonTag3"><a href="../tags/property/default.aspx.html" rel="tag">property</a></li>
<li class="CommonTag2"><a href="../tags/query/default.aspx.html" rel="tag">query</a></li>
<li class="CommonTag1"><a href="../tags/Session/default.aspx.html" rel="tag">Session</a></li>
</ul>

				        </div>
				        <div class="CommonContentBoxFooter"><a href="../tags/default.aspx.html">View more</a></div>
			        </div>
	            
	    
	        
	                <div class="CommonContentBox">
                        <h4 class="CommonContentBoxHeader">Page Details</h4>
	                    <div class="CommonContentBoxContent">
	            <div class="CustomWikiPageDetailsArea"><div class="CustomWikiPageDetailsTitle">Published by:</div><div class="CustomWikiPageDetailsAvatar"><img src="../../../resized-image.ashx/__size/50x50/key/CommunityServer.Components.Avatars/00.00.00.21.34/4TA9FMIYGIH8.jpg" alt="" style="border-width:0px;" /></div><div class="CustomWikiPageDetailsContent"><a href="../../../members/gabriel.schenker/default.aspx.html">gabriel.schenker</a><br/> on 09-23-2008</div></div><div class="WikiPageDetailsSummaryArea"><strong>6</strong> people found this article useful.</div>
				        </div>
				        
			        </div>
	            
	    
	    
	    
    </div>
    

			    </div>
                <div id="CommonSidebarLeft">
				    
				</div>
			    <div id="CommonContent"><div id="CommonContentInner">
    



   
   
   


<div class="CommonContentBox">
    <div class="CommonContentBoxContent">
        <div style="float: right">
            
        </div>
        
        <div class="CommonPaneTabSet">
            <div style="overflow: hidden;">
                <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                    <tr>
                        <td>
                            <div class="CommonPaneTab">
                                <a href="../identity-field-equality-and-hash-code.aspx.html"><img align="absmiddle" border="0" src="../../../Themes/hawaii/images/wiki/wiki-icon-article-tab.png" alt="" style="border-width:0px;" /></a>                            
                                <a href="../identity-field-equality-and-hash-code.aspx.html">Article</a>
                            </div>
                        </td>
                        
                                
                                                            
                        <td>
                            <div class="CommonPaneTabSelected">
                                <img align="absmiddle" border="0" src="../../../Themes/hawaii/images/wiki/wiki-icon-comment-tab.png" alt="" style="border-width:0px;" /> Comments (9)
                            </div>
                        </td>
                        <td>
                            <div class="CommonPaneTab">
                                <a href="history.aspx.html"><img align="absmiddle" border="0" src="../../../Themes/hawaii/images/wiki/wiki-icon-history-tab.png" alt="" style="border-width:0px;" /></a>
                                <a href="history.aspx.html">History</a> (1)
                            </div>
                        </td>
                    </tr>
                </tbody>
                </table>
            </div>
        </div>

        <div class="CommonPane">
            <div class="CommonGroupedContentArea">

                <h2 class="CommonContentBoxHeaderSmall">
                        <span><a href="../identity-field-equality-and-hash-code.aspx.html">Identity Field, Equality and Hash Code</a></span>
                        
                    </h2>                            

                
                        Sort by: 
                        <b><a href="comments.aspx%3FSort=PublishedDate&amp;PageIndex=1.html">Published Date</a></b> | 
                        <a href="comments.aspx%3FSort=MostRecent&amp;PageIndex=1.html">Most Recent</a> | 
                        <a href="comments.aspx%3FSort=MostUseful&amp;PageIndex=1.html">Most Useful</a>
                    
                 
                <div class="WikiCommentBubbleRoundTop" style="margin-top: 1em;"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                <div class="WikiCommentContent" style="padding-top: 4px;">
                    <div>
                        
                                <a href="../../../login.aspx%3FReturnUrl=%252Fwikis%252Fpatternsandpractices%252Fidentity-field-equality-and-hash-code%252Fcomments.aspx.html"><img src="../../../Themes/hawaii/images/wiki/add-a-new-comment.gif" alt="" style="border-width:0px;" /></a>
                            
                    </div>
                    <div style="clear: both;"></div>
                </div>
                <div class="WikiCommentBubbleRoundBottom"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>

                1 <a href="comments.aspx%3FPageIndex=2.html">2</a>&nbsp;<a href="comments.aspx%3FPageIndex=2.html">Next ></a>
                
                        <div class="WikiCommentArea">
                            <div class="WikiCommentBubble">
                                <div class="WikiCommentBubbleRoundTop"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                                <div class="WikiCommentContent">
                                    <div class="WikiCommentHeaderIcon"><a href="../../../members/s.rottem/default.aspx.html">
                                            <img src="../../../utility/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;" />
                                        </a></div>
                                    
                                    <div class="WikiCommentHeader">
                                        By: 
                                        <a href="../../../members/s.rottem/default.aspx.html">s.rottem</a>
                                        Posted on 
                                        10-27-2008 7:22
                                        
                                    </div>
                                    <div style="clear: both;"></div>
                                    
                                    <div><p>Isn&#39;t there a possible problem when using lazy loaded polymorphic classes when using &quot;T original = obj as T&quot;? &nbsp;</p>
<p>If the current instance is a DomesticCat and the passed instance is a Cat proxy that, in fact, represents a DomesticCat instance then the cast would fail and return null because the Cat proxy cannot be cast to DomesticCat, wouldn&#39;t it?</p>
<p>The only way I can see around this problem is to use NHibernateUtil.GetClass(entity) but then this means that often an object would need to be loaded to determine its type, which would harm performance. &nbsp;It would be accurate though...</p>
</div>

                                    <div style="float: right; font-size: 80%;">
                                        <a href="comments.aspx.html#addcomment">Reply</a>
                                        
                                        
                                    </div><div style="clear: both;"></div>
                                </div>
                                <div class="WikiCommentBubbleRoundBottom"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                            </div>
                            <div class="WikiCommentArrow"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div><div class="r6"></div><div class="r7"></div><div class="r8"></div><div class="r9"></div><div class="r10"></div></div>
                        </div>     
                    
                        <div class="WikiCommentArea">
                            <div class="WikiCommentBubble">
                                <div class="WikiCommentBubbleRoundTop"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                                <div class="WikiCommentContent">
                                    <div class="WikiCommentHeaderIcon"><a href="../../../members/s.rottem/default.aspx.html">
                                            <img src="../../../utility/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;" />
                                        </a></div>
                                    
                                    <div class="WikiCommentHeader">
                                        By: 
                                        <a href="../../../members/s.rottem/default.aspx.html">s.rottem</a>
                                        Posted on 
                                        10-29-2008 11:50
                                        
                                    </div>
                                    <div style="clear: both;"></div>
                                    
                                    <div><p>Thinking further on this topic, another consideration is that this approach will still break if you have a transient entity that you persist then evict from the Session thereby making it disconnected then compare it with a loaded entity with the same Id. &nbsp;</p>
<p>The loaded entity and the disconnected entity will be seen as equal but will have different hashcodes.</p>
<p>The only solution I can see that would be truly reliable would be to allocate an unique identifier at object creation and to persist it with the object. &nbsp;This value would then be consistent from initial transient object instantiation and would remain the same for all loaded instances of the entity too. &nbsp;This unique identifier would not necessarily have to be the Id property of the entity and would not need to be publicly exposed (just in case you&#39;re working with a legacy DB where the Id has business value - yuck, I know).</p>
</div>

                                    <div style="float: right; font-size: 80%;">
                                        <a href="comments.aspx.html#addcomment">Reply</a>
                                        
                                        
                                    </div><div style="clear: both;"></div>
                                </div>
                                <div class="WikiCommentBubbleRoundBottom"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                            </div>
                            <div class="WikiCommentArrow"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div><div class="r6"></div><div class="r7"></div><div class="r8"></div><div class="r9"></div><div class="r10"></div></div>
                        </div>     
                    
                        <div class="WikiCommentArea">
                            <div class="WikiCommentBubble">
                                <div class="WikiCommentBubbleRoundTop"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                                <div class="WikiCommentContent">
                                    <div class="WikiCommentHeaderIcon"><a href="../../../members/ido.ran/default.aspx.html">
                                            <img src="../../../utility/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;" />
                                        </a></div>
                                    
                                    <div class="WikiCommentHeader">
                                        By: 
                                        <a href="../../../members/ido.ran/default.aspx.html">ido.ran</a>
                                        Posted on 
                                        11-04-2008 16:08
                                        
                                    </div>
                                    <div style="clear: both;"></div>
                                    
                                    <div><p>I do not completely agree with you.</p>
<p>You wrote that the hash code of an object should never change, but think about an Int32 object, when you change its value its hash code changes.</p>
<p>Also,if you will cache the hash code of transient object, then persist it and load it in another session, the hash code of the &quot;used to be transient&quot; object and the &quot;loaded object&quot; should be equal, but they will not be.</p>
<p>What do you think about that?</p>
</div>

                                    <div style="float: right; font-size: 80%;">
                                        <a href="comments.aspx.html#addcomment">Reply</a>
                                        
                                        
                                    </div><div style="clear: both;"></div>
                                </div>
                                <div class="WikiCommentBubbleRoundBottom"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                            </div>
                            <div class="WikiCommentArrow"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div><div class="r6"></div><div class="r7"></div><div class="r8"></div><div class="r9"></div><div class="r10"></div></div>
                        </div>     
                    
                        <div class="WikiCommentArea">
                            <div class="WikiCommentBubble">
                                <div class="WikiCommentBubbleRoundTop"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                                <div class="WikiCommentContent">
                                    <div class="WikiCommentHeaderIcon"><a href="../../../members/ATGatrdner/default.aspx.html">
                                            <img src="../../../utility/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;" />
                                        </a></div>
                                    
                                    <div class="WikiCommentHeader">
                                        By: 
                                        <a href="../../../members/ATGatrdner/default.aspx.html">Noam Gal</a>
                                        Posted on 
                                        11-06-2008 11:40
                                        
                                    </div>
                                    <div style="clear: both;"></div>
                                    
                                    <div><p>I agree with s.rottem 2nd point - if you create a new object, save it, disconnect it, and then check for equality with the same object after it was loaded from the db, you should get equality.</p>
<p>I think it is much easier to assign a &quot;business key&quot; to every persistent class - it will not be a key in any database sense, and the class should still have some kind of generated id column with no business logic, but a collection of (as few as possible) properties should define equality between two objects of the same class, and be used to calculate hashcode.</p>
</div>

                                    <div style="float: right; font-size: 80%;">
                                        <a href="comments.aspx.html#addcomment">Reply</a>
                                        
                                        
                                    </div><div style="clear: both;"></div>
                                </div>
                                <div class="WikiCommentBubbleRoundBottom"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                            </div>
                            <div class="WikiCommentArrow"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div><div class="r6"></div><div class="r7"></div><div class="r8"></div><div class="r9"></div><div class="r10"></div></div>
                        </div>     
                    
                        <div class="WikiCommentArea">
                            <div class="WikiCommentBubble">
                                <div class="WikiCommentBubbleRoundTop"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                                <div class="WikiCommentContent">
                                    <div class="WikiCommentHeaderIcon"><a href="../../../members/ssteinegger/default.aspx.html">
                                            <img src="../../../utility/anonymous.gif" alt="" style="border-width:0px;max-height:32px;max-width:32px;" />
                                        </a></div>
                                    
                                    <div class="WikiCommentHeader">
                                        By: 
                                        <a href="../../../members/ssteinegger/default.aspx.html">Stefan Steinegger</a>
                                        Posted on 
                                        03-04-2009 10:50
                                        
                                    </div>
                                    <div style="clear: both;"></div>
                                    
                                    <div><p>&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;I don&#39;t recommend writing Equals dependent to the id provided by the database. The business identity starts when the object is created and should not change when storing it (because storing does not change the object). It could be based on unique properties. We are using guids that are initialized in the constructor.&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;</p>
<p>&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;You could have bugs that only appear when the object is stored at a certain point (before or after a comparison). I wouldn&#39;t like to search such a bug.&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;</p>
<p>&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;I don&#39;t recommend to write such a == and != operator for regular entities. If you call those operators you normally expect a reference comparison. You don&#39;t want to look into the code of the entity to see if it has been overridden and does something sophisticated (which you need to know when you call it). So this kind of operator implementation is just making things more confusing. I would only do this for value types.&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;</p>
<p>&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;&lt;p&gt;Have you ever had the same object in more than one instance? One from the database and one from the client? You need to find out that the object is identical (Equals), but not the same (==).&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;&lt;/p&gt;</p>
</div>

                                    <div style="float: right; font-size: 80%;">
                                        <a href="comments.aspx.html#addcomment">Reply</a>
                                        
                                        
                                    </div><div style="clear: both;"></div>
                                </div>
                                <div class="WikiCommentBubbleRoundBottom"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div></div>
                            </div>
                            <div class="WikiCommentArrow"><div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div><div class="r6"></div><div class="r7"></div><div class="r8"></div><div class="r9"></div><div class="r10"></div></div>
                        </div>     
                    
                
                 
            </div>
        
        </div>
    </div>
</div>


</div></div>
			    <div style="clear: both;"></div>
			    
			    
            </div>
                
            <div id="CommonFooter">
                <div class="Common">
                    
                        
                	    
                        

                        
                                <a href="http://communityserver.com/" target="_blank"><img src="../../../utility/PoweredByCS_commercial.gif" alt="Powered by Community Server (Commercial Edition), by Telligent Systems " style="border-width:0px;" /></a>
		                    
                		
                    
                 </div>
            </div>
		
<script type="text/javascript">
// <![CDATA[
Telligent_Modal.Configure('/utility/loading.htm',['CommonModal'],['CommonModalTitle'],['CommonModalClose'],['CommonModalContent'],['CommonModalFooter'],['CommonModalResize'],['CommonModalMask'],100,false,true);
// ]]>
</script><script type="text/javascript">
<!--
function KeyDownHandlerctl00_ctl00_sr_sr_ctl00_ctl00_TitleBarSearchButton(event)
{
	if (event.keyCode == 13)
	{
		event.returnValue = false;
		event.cancel = true;
     __doPostBack('ctl00$ctl00$sr$sr$ctl00$ctl00$TitleBarSearchButton','')
   return false;
	}
}

//-->
</script>
<script type="text/javascript">
// <![CDATA[
window.ctl00_ctl00_rcr_rcr_ctl00_ctl02_ctl00_ctl01_ctl01=new WikiPageHierarchy('ctl00_ctl00_rcr_rcr_ctl00_ctl02_ctl00_ctl01_ctl01',new Function('mode','pageId','callback','WebForm_DoCallback(\'ctl00$ctl00$rcr$rcr$ctl00$ctl02$ctl00$ctl01$ctl01\',mode + \':\' + pageId,callback,\"\",null,false)'),'<img src="http://nhforge.org/wikis/patternsandpractices/identity-field-equality-and-hash-code/\&quot;/WebResource.axd?d=sNXLzaCqbYO_a-ZjCZB88HF4WT8YRbuRaD2xfyafsCiRqelSVt4GYH9QzNn_EvXM02V5zpjGwsymzmW30OIrbB4EUeqA1XW4oU6sME2qMEcOgSVpfz1_YK7UdKB8bVtbFiuWJt3UljrDk5OnRzQEWKDyXNGX0R6sJsultQeBjufuUDz-0&amp;t=634395149500000000\&quot;" alt=\"+\" style=\"border-width: 0;\" />','<img src="http://nhforge.org/wikis/patternsandpractices/identity-field-equality-and-hash-code/\&quot;/WebResource.axd?d=I7Z2L5Ca7ffItUeObf-LA3ykZ3Mbmr-vwfNJv2PfNk2O4alHWIJbJADyKhl0k71mJCpGTePjifKqZQx_Rs64LrGhlEU25qRjlCh8LoYwo2tck8EIbBdQKg5CISopk9hz_6ZbK_GNtBJljwOq57_FBvxYCTM1&amp;t=634395149500000000\&quot;" alt=\"-\" style=\"border-width: 0;\" />','<div>Loading...</div>');
// ]]>
</script><script type="text/javascript">
// <![CDATA[
window.ctl00_ctl00_rcr_rcr_ctl00_ctl03_ctl00_ctl01_ctl01=new WikiPageHierarchy('ctl00_ctl00_rcr_rcr_ctl00_ctl03_ctl00_ctl01_ctl01',new Function('mode','pageId','callback','WebForm_DoCallback(\'ctl00$ctl00$rcr$rcr$ctl00$ctl03$ctl00$ctl01$ctl01\',mode + \':\' + pageId,callback,\"\",null,false)'),'<img src="http://nhforge.org/wikis/patternsandpractices/identity-field-equality-and-hash-code/\&quot;/WebResource.axd?d=sNXLzaCqbYO_a-ZjCZB88HF4WT8YRbuRaD2xfyafsCiRqelSVt4GYH9QzNn_EvXM02V5zpjGwsymzmW30OIrbB4EUeqA1XW4oU6sME2qMEcOgSVpfz1_YK7UdKB8bVtbFiuWJt3UljrDk5OnRzQEWKDyXNGX0R6sJsultQeBjufuUDz-0&amp;t=634395149500000000\&quot;" alt=\"+\" style=\"border-width: 0;\" />','<img src="http://nhforge.org/wikis/patternsandpractices/identity-field-equality-and-hash-code/\&quot;/WebResource.axd?d=I7Z2L5Ca7ffItUeObf-LA3ykZ3Mbmr-vwfNJv2PfNk2O4alHWIJbJADyKhl0k71mJCpGTePjifKqZQx_Rs64LrGhlEU25qRjlCh8LoYwo2tck8EIbBdQKg5CISopk9hz_6ZbK_GNtBJljwOq57_FBvxYCTM1&amp;t=634395149500000000\&quot;" alt=\"-\" style=\"border-width: 0;\" />','<div>Loading...</div>');
// ]]>
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-5443308-1");
pageTracker._trackPageview();
</script></form>
		
	</body>
</html>
