---
layout:
---
<!doctype html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <link rel="canonical" href="https://nhibernate.info/doc/nhibernate-reference/mapping.html" />
   <title>Chapter&nbsp;5.&nbsp;Basic O/R Mapping</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="NHibernate - Relational Persistence for Idiomatic .NET"><link rel="up" href="index.html" title="NHibernate - Relational Persistence for Idiomatic .NET"><link rel="previous" href="persistent-classes.html" title="Chapter&nbsp;4.&nbsp;Persistent Classes"><link rel="next" href="collections.html" title="Chapter&nbsp;6.&nbsp;Collection Mapping"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;5.&nbsp;Basic O/R Mapping</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="persistent-classes.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="collections.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="mapping"></a>Chapter&nbsp;5.&nbsp;Basic O/R Mapping</h2></div></div><div></div></div>{% include google_adsense.html %}<div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-declaration"></a>5.1.&nbsp;Mapping declaration</h2></div></div><div></div></div><p>
            Object/relational mappings are defined in an XML document. The mapping document
            is designed to be readable and hand-editable. The mapping language is object-centric,
            meaning that mappings are constructed around persistent class declarations, not
            table declarations.
        </p><p>
            Note that, even though many NHibernate users choose to define XML mappings by hand,
            a number of tools exist to generate the mapping document, including
            NHibernate.Mapping.Attributes library and various template-based code
            generators (CodeSmith, MyGeneration). You may also use
            <tt class="literal">NHibernate.Mapping.ByCode</tt> available since NHibernate 3.2, or
            <a href="https://github.com/jagregory/fluent-nhibernate" target="_top">Fluent NHibernate</a>.
        </p><p>
            Let's kick off with an example mapping:
        </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Eg"
    namespace="Eg"&gt;

    &lt;class name="Cat" table="CATS" discriminator-value="C"&gt;
        &lt;id name="Id" column="uid" type="Int64"&gt;
            &lt;generator class="hilo"/&gt;
        &lt;/id&gt;
        &lt;discriminator column="subclass" type="Char"/&gt;
        &lt;property name="BirthDate" type="Date"/&gt;
        &lt;property name="Color" not-null="true"/&gt;
        &lt;property name="Sex" not-null="true" update="false"/&gt;
        &lt;property name="Weight"/&gt;
        &lt;many-to-one name="Mate" column="mate_id"/&gt;
        &lt;set name="Kittens"&gt;
            &lt;key column="mother_id"/&gt;
            &lt;one-to-many class="Cat"/&gt;
        &lt;/set&gt;
        &lt;subclass name="DomesticCat" discriminator-value="D"&gt;
            &lt;property name="Name" type="String"/&gt;
        &lt;/subclass&gt;
    &lt;/class&gt;

    &lt;class name="Dog"&gt;
        &lt;!-- mapping for Dog could go here --&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
             We will now discuss the content of the mapping document. We will mainly describe the
             document elements and attributes that are used by NHibernate at runtime. The mapping
             document also contains some extra optional attributes and elements that affect the
             database schemas exported by the schema export tool, for example, the
             <tt class="literal">column</tt> sub-element of a property.
        </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-xmlns"></a>5.1.1.&nbsp;XML Namespace</h3></div></div><div></div></div><p>
                All XML mappings should declare the XML namespace shown. The actual schema definition
                may be found in the <tt class="literal">src\nhibernate-mapping.xsd</tt> file in the
                NHibernate distribution.
            </p><p><span class="emphasis"><em>
                Tip: to enable IntelliSense for mapping and configuration files, copy the appropriate
                <tt class="literal">.xsd</tt> files as part of any project in your solution,
                (<tt class="literal">Build Action</tt> can be "None") or as "Solution Files" or in your
              <tt class="literal">"Lib"</tt> folder and then add it to the <tt class="literal">Schemas</tt> property of the xml file.
              You can copy it in <tt class="literal">&lt;VS installation directory&gt;\Xml\Schemas</tt>, take care because you will have to deal
              with different version of the xsd for different versions of NHibernate.
            </em></span>
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-mapping"></a>5.1.2.&nbsp;hibernate-mapping</h3></div></div><div></div></div><p>
                This element has several optional attributes. The <tt class="literal">schema</tt> and <tt class="literal">catalog</tt> attributes
                specify that tables referred to by this mapping belong to the named schema and/or catalog. If they are specified,
                table names will be qualified by the given schema and/or catalog name. If they are missing, table names will be
                unqualified. The <tt class="literal">default-cascade</tt> attribute specifies what cascade style
                should be assumed for properties and collections which do not specify a
                <tt class="literal">cascade</tt> attribute. The <tt class="literal">auto-import</tt> attribute lets us
                use unqualified class names in the query language, by default. The <tt class="literal">assembly</tt>
                and <tt class="literal">namespace</tt> attributes specify the assembly where persistent classes
                are located and the namespace they are declared in.
            </p><div class="programlistingco"><pre class="programlisting">&lt;hibernate-mapping
    schema="schemaName"                               <span class="co">(1)</span>
    catalog="catalogName"                             <span class="co">(2)</span>
    default-cascade="none|save-update..."             <span class="co">(3)</span>
    auto-import="true|false"                          <span class="co">(4)</span>
    assembly="Eg"                                     <span class="co">(5)</span>
    namespace="Eg"                                    <span class="co">(6)</span>
    default-access="field|property|field.camelcase..."<span class="co">(7)</span>
    default-lazy="true|false"                         <span class="co">(8)</span>
 /&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema</tt> (optional): The name of a database schema.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">catalog</tt> (optional): The name of a database catalog.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">default-cascade</tt> (optional - defaults to <tt class="literal">none</tt>):
                            A default cascade style.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">auto-import</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Specifies whether we can use unqualified class names of classes in this mapping
                            in the query language.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">assembly</tt> and <tt class="literal">namespace</tt> (optional): Specify
                            assembly and namespace to use for unqualified class names in the mapping document.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">default-access</tt> (optional - defaults to property):
                            The strategy NHibernate should use for accessing a property value. It can be a custom
                            implementation of <tt class="literal">IPropertyAccessor</tt>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">default-lazy</tt> (optional - defaults to <tt class="literal">true</tt>):
                            The default value for unspecified <tt class="literal">lazy</tt> attributes of class and collection mappings.
                        </p></td></tr></table></div></div><p>
                If you are not using <tt class="literal">assembly</tt> and <tt class="literal">namespace</tt>
                attributes, you have to specify fully-qualified class names, including the name
                of the assembly that classes are declared in.
            </p><p>
                If you have two persistent classes with the same (unqualified) name, you should set
                <tt class="literal">auto-import="false"</tt>. NHibernate will throw an exception if you attempt
                to assign two classes to the same "imported" name.
            </p><p>
                The <tt class="literal">hibernate-mapping</tt> element allows you to nest several persistent <tt class="literal">&lt;class&gt;</tt>
                mappings, as shown above. It is, however, good practice to map only a single persistent class, or a single class
                hierarchy, in one mapping file and name it after the persistent super-class. For example, <tt class="literal">Cat.hbm.xml</tt>,
                <tt class="literal">Dog.hbm.xml</tt>, or if using inheritance, <tt class="literal">Animal.hbm.xml</tt>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-class"></a>5.1.3.&nbsp;class</h3></div></div><div></div></div><p>
                You may declare a persistent class using the <tt class="literal">class</tt> element:
            </p><div class="programlistingco"><pre class="programlisting">&lt;class
    name="className"                                  <span class="co">(1)</span>
    table="tableName"                                 <span class="co">(2)</span>
    discriminator-value="discriminatorValue"          <span class="co">(3)</span>
    mutable="true|false"                              <span class="co">(4)</span>
    schema="owner"                                    <span class="co">(5)</span>
    catalog="catalog"                                 <span class="co">(6)</span>
    proxy="proxyInterface"                            <span class="co">(7)</span>
    dynamic-update="true|false"                       <span class="co">(8)</span>
    dynamic-insert="true|false"                       <span class="co">(9)</span>
    select-before-update="true|false"                 <span class="co">(10)</span>
    polymorphism="implicit|explicit"                  <span class="co">(11)</span>
    where="arbitrary sql where condition"             <span class="co">(12)</span>
    persister="persisterClass"                        <span class="co">(13)</span>
    batch-size="N"                                    <span class="co">(14)</span>
    optimistic-lock="none|version|dirty|all"          <span class="co">(15)</span>
    lazy="true|false"                                 <span class="co">(16)</span>
    abstract="true|false"                             <span class="co">(17)</span>
    entity-name="entityName"                          <span class="co">(18)</span>
    check="arbitrary sql check condition"             <span class="co">(19)</span>
    subselect="SQL expression"                        <span class="co">(20)</span>
    schema-action="none|drop|update|export|validate|all|commaSeparatedValues"  <span class="co">(21)</span>
    rowid="unused"                                    <span class="co">(22)</span>
    node="unused"                                     <span class="co">(23)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The fully qualified .NET class name of the persistent class
                            (or interface), including its assembly name.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt>(optional - defaults to the unqualified class name): The name of its database table.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">discriminator-value</tt> (optional, defaults to the class name): A value
                            that distinguishes individual subclasses, used for polymorphic behaviour. Acceptable
                            values include <tt class="literal">null</tt> and <tt class="literal">not null</tt>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">mutable</tt> (optional - defaults to <tt class="literal">true</tt>): Specifies
                            that instances of the class are (not) mutable.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema</tt> (optional): Overrides the schema name specified by
                            the root <tt class="literal">&lt;hibernate-mapping&gt;</tt> element.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">catalog</tt> (optional): Overrides the catalog name specified by
                            the root <tt class="literal">&lt;hibernate-mapping&gt;</tt> element.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">proxy</tt> (optional): Specifies an interface to use for lazy
                            initializing proxies. You may specify the name of the class itself.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">dynamic-update</tt> (optional - defaults to <tt class="literal">false</tt>):
                            Specifies that <tt class="literal">UPDATE</tt> SQL should be generated at runtime and
                            can contain only those columns whose values have changed.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">dynamic-insert</tt> (optional - defaults to <tt class="literal">false</tt>):
                            Specifies that <tt class="literal">INSERT</tt> SQL should be generated at runtime and
                            contain only the columns whose values are not null.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">select-before-update</tt> (optional - defaults to <tt class="literal">false</tt>):
                            Specifies that NHibernate should <span class="emphasis"><em>never</em></span> perform an SQL <tt class="literal">UPDATE</tt>
                            unless it is certain that an object is actually modified. In certain cases (actually, only
                            when a transient object has been associated with a new session using <tt class="literal">update()</tt>),
                            this means that NHibernate will perform an extra SQL <tt class="literal">SELECT</tt> to determine
                            if an <tt class="literal">UPDATE</tt> is actually required.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">polymorphism</tt> (optional - defaults to <tt class="literal">implicit</tt>):
                            Determines whether implicit or explicit query polymorphism is used.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(12)</td><td valign="top" align="left"><p>
                            <tt class="literal">where</tt> (optional) specify an arbitrary SQL <tt class="literal">WHERE</tt>
                            condition to be used when retrieving objects of this class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(13)</td><td valign="top" align="left"><p>
                            <tt class="literal">persister</tt> (optional): Specifies a custom <tt class="literal">IClassPersister</tt>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(14)</td><td valign="top" align="left"><p>
                            <tt class="literal">batch-size</tt> (optional - defaults to <tt class="literal">1</tt>): Specifies a "batch size"
                            for fetching instances of this class by identifier. See <a href="performance.html#performance-fetching-batch" title="21.1.5.&nbsp;Using batch fetching">Section&nbsp;21.1.5, &#8220;Using batch fetching&#8221;</a>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(15)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (optional - defaults to <tt class="literal">version</tt>):
                            Determines the optimistic locking strategy.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(16)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (optional - defaults to <tt class="literal">true</tt>): Lazy fetching can be
                            disabled by setting <tt class="literal">lazy="false"</tt>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(17)</td><td valign="top" align="left"><p>
                            <tt class="literal">abstract</tt> (optional - defaults to <tt class="literal">false</tt>): Used to mark abstract
                            super-classes in <tt class="literal">&lt;union-subclass&gt;</tt> hierarchies.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(18)</td><td valign="top" align="left"><p>
                            <tt class="literal">entity-name</tt> (optional - defaults to the class name): NHibernate allows a class to
                            be mapped multiple times, potentially to different tables. See <a href="mapping.html#mapping-entityname" title="5.3.&nbsp;Mapping a class more than once">Section&nbsp;5.3, &#8220;Mapping a class more than once&#8221;</a>.
                            It also allows entity mappings that are represented by dictionaries at the .Net level. In these cases,
                            you should provide an explicit arbitrary name for the entity. See
                            <a href="persistent-classes.html#persistent-classes-dynamicmodels" title="4.4.&nbsp;Dynamic models">Section&nbsp;4.4, &#8220;Dynamic models&#8221;</a> for more information.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(19)</td><td valign="top" align="left"><p>
                            <tt class="literal">check</tt> (optional): An SQL expression used to generate a multi-row check constraint
                            for automatic schema generation.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(20)</td><td valign="top" align="left"><p>
                            <tt class="literal">subselect</tt> (optional): Maps an immutable and read-only entity to a database sub-select.
                            This is useful if you want to have a view instead of a base table. See
                            <a href="mapping.html#mapping-declaration-subselect" title="5.1.4.&nbsp;subselect">Section&nbsp;5.1.4, &#8220;subselect&#8221;</a> for more information.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(21)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema-action</tt> (optional): Specifies which schema actions should be generated for the
                            class table by the schema export tool. Valid values are <tt class="literal">none</tt>, <tt class="literal">drop</tt>,
                            <tt class="literal">update</tt>, <tt class="literal">export</tt>, <tt class="literal">validate</tt>,
                            <tt class="literal">all</tt> and any combination of them separated by commas (<tt class="literal">,</tt>).
                            Not specifying it is treated as <tt class="literal">all</tt>. See <a href="toolsetguide.html#toolsetguide-s1" title="22.1.&nbsp;Schema Generation">Section&nbsp;22.1, &#8220;Schema Generation&#8221;</a>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(22)(23)</td><td valign="top" align="left"><p>
                            <tt class="literal">rowid</tt> and <tt class="literal">node</tt> (optional): These attributes have no
                            usage in NHibernate. The <tt class="literal">node</tt> attribute is present on many more mapping elements, and
                            has no usage on them too. It will be omitted from the documentation of these other elements.
                        </p></td></tr></table></div></div><p>
                It is perfectly acceptable for the named persistent class to be an interface. You would then
                declare implementing classes of that interface using the <tt class="literal">&lt;subclass&gt;</tt>
                element. You may persist any inner class. You should specify the
                class name using the standard form ie. <tt class="literal">Eg.Foo+Bar, Eg</tt>.
                Due to an HQL parser limitation inner classes can not be used in queries in NHibernate, unless
                assigning to them an <tt class="literal">entity-name</tt> without the <tt class="literal">+</tt> character.
            </p><p>
                Changes to immutable classes, <tt class="literal">mutable="false"</tt>, will not be
                persisted. This allows NHibernate to make some minor performance optimizations.
            </p><p>
                The optional <tt class="literal">proxy</tt> attribute enables customization of the generated proxy
                for lazy initialization of persistent instances of the class: by default, the proxy derives
                from the class. Specifying an interface causes the proxy to implement it and to use
                <tt class="literal">System.Object</tt> as its base class. This enables proxifying a sealed class
                or a class having non virtual members. The specified interface should declare all the public
                members of the persistent class. On <tt class="literal">ISession.Load</tt> and on
                <tt class="literal">many-to-one</tt> associations, NHibernate will initially return proxies. The
                actual persistent object will be loaded when a method or property of the proxy is invoked.
                See <a href="performance.html#performance-fetching-initialization" title="21.1.4.&nbsp;Initializing collections and proxies">Section&nbsp;21.1.4, &#8220;Initializing collections and proxies&#8221;</a>.
            </p><p><span class="emphasis"><em>Implicit</em></span> polymorphism means that instances of the class will be returned
                by a query that names any superclass or implemented interface or the class and that instances
                of any subclass of the class will be returned by a query that names the class itself.
                <span class="emphasis"><em>Explicit</em></span> polymorphism means that class instances will be returned only
                be queries that explicitly name that class and that queries that name the class will return
                only instances of subclasses mapped inside this <tt class="literal">&lt;class&gt;</tt> declaration
                as a <tt class="literal">&lt;subclass&gt;</tt> or <tt class="literal">&lt;joined-subclass&gt;</tt>. For
                most purposes the default, <tt class="literal">polymorphism="implicit"</tt>, is appropriate.
                Explicit polymorphism is useful when two different classes are mapped to the same table
                (this allows a "lightweight" class that contains a subset of the table columns).
            </p><p>
                The <tt class="literal">persister</tt> attribute lets you customize the persistence strategy used for
                the class. You may, for example, specify your own subclass of
                <tt class="literal">NHibernate.Persister.EntityPersister</tt> or you might even provide a
                completely new implementation of the interface
                <tt class="literal">NHibernate.Persister.IClassPersister</tt> that implements persistence via,
                for example, stored procedure calls, serialization to flat files or LDAP. See
                <tt class="literal">NHibernate.DomainModel.CustomPersister</tt> for a simple example (of "persistence"
                to a <tt class="literal">Hashtable</tt>).
            </p><p>
                Note that the <tt class="literal">dynamic-update</tt> and <tt class="literal">dynamic-insert</tt>
                settings are not inherited by subclasses and so may also be specified on the
                <tt class="literal">&lt;subclass&gt;</tt> or <tt class="literal">&lt;joined-subclass&gt;</tt> elements.
                These settings may increase performance in some cases, but might actually decrease
                performance in others. Use judiciously.
            </p><p>
                Use of <tt class="literal">select-before-update</tt> will usually decrease performance. It is very
                useful to prevent a database update trigger being called unnecessarily if you reattach a graph
                of detached instances to an <tt class="literal">ISession</tt>.
            </p><p>
                If you enable <tt class="literal">dynamic-update</tt>, you will have a choice of optimistic
                locking strategies:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                        <tt class="literal">version</tt> check the version/timestamp columns
                    </p></li><li><p>
                        <tt class="literal">all</tt> check all columns
                    </p></li><li><p>
                        <tt class="literal">dirty</tt> check the changed columns
                    </p></li><li><p>
                        <tt class="literal">none</tt> do not use optimistic locking
                    </p></li></ul></div><p>
                We <span class="emphasis"><em>very</em></span> strongly recommend that you use version/timestamp
                columns for optimistic locking with NHibernate. This is the optimal strategy with
                respect to performance and is the only strategy that correctly handles modifications
                made outside of the session (ie. when <tt class="literal">ISession.Update()</tt> is used).
            </p><p>
                Beginning with NHibernate 1.2.0, version numbers start with 1, not 0 as in previous
                versions. This was done to allow using 0 as <tt class="literal">unsaved-value</tt> for the
                version property.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-subselect"></a>5.1.4.&nbsp;subselect</h3></div></div><div></div></div><p>
                An alternative to mapping a class to table or view columns is to map a <span class="emphasis"><em>query</em></span>.
                For that, we use the <tt class="literal">&lt;subselect&gt;</tt> element, which is mutually
                exclusive with <tt class="literal">&lt;subclass&gt;</tt>, <tt class="literal">&lt;joined-subclass&gt;</tt>
                and <tt class="literal">&lt;union-subclass&gt;</tt>. The subselect may also be specified as a
                <tt class="literal">&lt;class&gt;</tt> attribute.
                The content of the <tt class="literal">subselect</tt> element is a SQL query:
            </p><pre class="programlisting">&lt;subselect&gt;
    &lt;![CDATA[
    SELECT cat.ID, cat.NAME, cat.SEX, cat.MATE FROM cat
    ]]&gt;
&lt;/subselect&gt;</pre><p>
                Usually, when mapping a query using <tt class="literal">subselect</tt> you will want to mark
                the class as not mutable (<tt class="literal">mutable="false"</tt>), unless you specify custom
                SQL for performing the UPDATE, DELETE and INSERT operations.
            </p><p>
                Also, it makes sense to force synchronization of the tables affected by the query, using
                one or more <tt class="literal">&lt;synchronize&gt;</tt> entries:
            </p><pre class="programlisting">&lt;subselect&gt;
    &lt;![CDATA[
    SELECT cat.ID, cat.NAME, cat.SEX, cat.MATE FROM cat
    ]]&gt;
&lt;/subselect&gt;
&lt;synchronize table="cat"/&gt;</pre><p>
                This ensures that auto-flush happens correctly and that queries against the derived entity
                do not return stale data.
            </p><p>
                You then still have to declare the class id and properties.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-id"></a>5.1.5.&nbsp;id</h3></div></div><div></div></div><p>
                Mapped classes <span class="emphasis"><em>must</em></span> declare the primary key column of the database
                table. Most classes will also have a property holding the unique identifier
                of an instance. The <tt class="literal">&lt;id&gt;</tt> element defines the mapping from that
                property to the primary key column.
            </p><div class="programlistingco"><pre class="programlisting">&lt;id
    name="propertyName"                               <span class="co">(1)</span>
    type="typeName"                                   <span class="co">(2)</span>
    length="typeLength"                               <span class="co">(3)</span>
    column="columnName"                               <span class="co">(4)</span>
    unsaved-value="any|none|null|undefined|idValue"   <span class="co">(5)</span>
    access="field|property|nosetter|className"        <span class="co">(6)</span>
    generator="generatorClass"&gt;                       <span class="co">(7)</span>

    &lt;generator class="generatorClass"/&gt;
&lt;/id&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt> (optional): The name of the identifier property.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (optional): A name that indicates the NHibernate type.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">length</tt> (optional): If the type takes a length and does not
                            already specify it, its length.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (optional - defaults to the property name): The
                            name of the primary key column.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">unsaved-value</tt> (optional - defaults to a "sensible" value):
                            An identifier property value that indicates that an instance is newly instantiated
                            (unsaved), distinguishing it from transient instances that were saved or loaded
                            in a previous session.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): The
                            strategy NHibernate should use for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">generator</tt>: The name of a generator class to use for generating
                            unique identifiers for instances of the persistent class. See the
                            <a href="mapping.html#mapping-declaration-id-generator" title="5.1.5.1.&nbsp;generator">generator element</a>. Specifying
                            either the attribute or the element is required. The attribute takes precedence over
                            the element.
                        </p></td></tr></table></div></div><p>
                If the <tt class="literal">name</tt> attribute is missing, it is assumed that the class has no
                identifier property.
            </p><p>
                The <tt class="literal">unsaved-value</tt> attribute is almost never needed in NHibernate.
            </p><p>
                There is an alternative <tt class="literal">&lt;composite-id&gt;</tt> declaration to allow access to
                legacy data with composite keys. We strongly discourage its use for anything else.
            </p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-generator"></a>5.1.5.1.&nbsp;generator</h4></div></div><div></div></div><p>
                    The required <tt class="literal">generator</tt> names a .NET class used to generate unique identifiers
                    for instances of the persistent class.
                </p><p>
                  The generator can be declared using the <tt class="literal">&lt;generator&gt;</tt> child element. If
                  any parameters are required to configure or initialize the generator instance, they are passed
                  using <tt class="literal">&lt;param&gt;</tt> elements.
                </p><pre class="programlisting">&lt;id name="Id" type="Int64" column="uid"&gt;
    &lt;generator class="NHibernate.Id.TableHiLoGenerator"&gt;
        &lt;param name="table"&gt;uid_table&lt;/param&gt;
        &lt;param name="column"&gt;next_hi_value_column&lt;/param&gt;
    &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                    If no parameters are required, the generator can be declared using a <tt class="literal">generator</tt>
                    attribute directly on the <tt class="literal">&lt;id&gt;</tt> element, as follows:
                </p><pre class="programlisting">&lt;id name="Id" type="Int64" column="uid" generator="native" /&gt;</pre><p>
                    All generators implement the interface <tt class="literal">NHibernate.Id.IIdentifierGenerator</tt>.
                    This is a very simple interface; some applications may choose to provide their own specialized
                    implementations. However, NHibernate provides a range of built-in implementations. There are shortcut
                    names for the built-in generators:

                    </p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">increment</tt></span></dt><dd><p>
                                generates identifiers of any integral type that are unique only when
                                no other process is inserting data into the same table.
                                <span class="emphasis"><em>Do not use in a cluster.</em></span>
                            </p></dd><dt><span class="term"><tt class="literal">counter</tt>, <tt class="literal">vm</tt></span></dt><dd><p>
                                generates identifiers of 64bits integral type constructed from the system
                                time and a counter value.
                                <span class="emphasis"><em>Do not use in a cluster.  May generate colliding identifiers in
                                a bit less than one year.</em></span>
                            </p></dd><dt><span class="term"><tt class="literal">identity</tt></span></dt><dd><p>
                                supports identity columns in DB2, MySQL, MS SQL Server, Sybase and some other systems.
                                The identifier returned by the database is converted to the property type using
                                <tt class="literal">Convert.ChangeType</tt>. Any integral property type is thus supported.
                                See <a href="mapping.html#mapping-declaration-id-sequences" title="5.1.5.6.&nbsp;Identity columns and Sequences">Section&nbsp;5.1.5.6, &#8220;Identity columns and Sequences&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">sequence</tt></span></dt><dd><p>
                                uses a sequence in DB2, PostgreSQL, Oracle and some other systems, or a generator
                                in Firebird. The identifier returned by the database is converted to the property
                                type using <tt class="literal">Convert.ChangeType</tt>. Any integral property type is
                                thus supported.
                                See <a href="mapping.html#mapping-declaration-id-sequences" title="5.1.5.6.&nbsp;Identity columns and Sequences">Section&nbsp;5.1.5.6, &#8220;Identity columns and Sequences&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">hilo</tt></span></dt><dd><p><a name="mapping-declaration-id-hilodescription"></a>
                                uses a hi/lo algorithm to efficiently generate identifiers of any integral type,
                                given a table and column (by default <tt class="literal">hibernate_unique_key</tt> and
                                <tt class="literal">next_hi</tt> respectively) as a source of hi values. The hi/lo algorithm
                                generates identifiers that are unique only for a particular database. <span class="emphasis"><em>Do not
                                use this generator with an user-supplied connection.</em></span> See
                                <a href="mapping.html#mapping-declaration-id-hilo" title="5.1.5.2.&nbsp;Hi/Lo Algorithm">Section&nbsp;5.1.5.2, &#8220;Hi/Lo Algorithm&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">seqhilo</tt></span></dt><dd><p>
                                uses a hi/lo algorithm to efficiently generate identifiers of any integral type,
                                given a named database sequence. See <a href="mapping.html#mapping-declaration-id-hilo" title="5.1.5.2.&nbsp;Hi/Lo Algorithm">Section&nbsp;5.1.5.2, &#8220;Hi/Lo Algorithm&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">uuid.hex</tt></span></dt><dd><p>
                                uses <tt class="literal">System.Guid</tt> and its <tt class="literal">ToString(string format)</tt> method
                                to generate identifiers of type string.  The length of the string returned depends on the 
                                configured <tt class="literal">format</tt>. See <a href="mapping.html#mapping-declaration-id-uuid-hex" title="5.1.5.3.&nbsp;UUID Hex Algorithm">Section&nbsp;5.1.5.3, &#8220;UUID Hex Algorithm&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">uuid.string</tt></span></dt><dd><p>
                                uses a new <tt class="literal">System.Guid</tt> to create a <tt class="literal">byte[]</tt> that is
                                converted to a string. See <a href="mapping.html#mapping-declaration-id-uuid-string" title="5.1.5.4.&nbsp;UUID String Algorithm">Section&nbsp;5.1.5.4, &#8220;UUID String Algorithm&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">guid</tt></span></dt><dd><p>
                                uses a new <tt class="literal">System.Guid</tt> as the identifier. It is <span class="emphasis"><em>not equivalent</em></span>
                                to the Hibernate <tt class="literal">guid</tt> generator. See <a href="mapping.html#mapping-declaration-id-guid" title="5.1.5.5.&nbsp;GUID Algorithms">Section&nbsp;5.1.5.5, &#8220;GUID Algorithms&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">guid.comb</tt></span></dt><dd><p>
                                uses the algorithm to generate a new <tt class="literal">System.Guid</tt>
                                described by Jimmy Nilsson in
                                <a href="https://www.informit.com/articles/article.aspx?p=25862" target="_top">this
                                article</a>. See also <a href="mapping.html#mapping-declaration-id-guid" title="5.1.5.5.&nbsp;GUID Algorithms">Section&nbsp;5.1.5.5, &#8220;GUID Algorithms&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">guid.native</tt></span></dt><dd><p>
                                uses the database server side Guid function.
                            </p></dd><dt><span class="term"><tt class="literal">native</tt></span></dt><dd><p>
                                picks <tt class="literal">identity</tt>, <tt class="literal">sequence</tt> or
                                <tt class="literal">hilo</tt> depending upon the capabilities of the
                                underlying database.
                                See <a href="mapping.html#mapping-declaration-id-sequences" title="5.1.5.6.&nbsp;Identity columns and Sequences">Section&nbsp;5.1.5.6, &#8220;Identity columns and Sequences&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">assigned</tt></span></dt><dd><p>
                                lets the application to assign an identifier to the object before
                                <tt class="literal">Save()</tt> is called.
                                See <a href="mapping.html#mapping-declaration-id-assigned" title="5.1.5.7.&nbsp;Assigned Identifiers">Section&nbsp;5.1.5.7, &#8220;Assigned Identifiers&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">select</tt></span></dt><dd><p>
                                retrieves a primary key, assigned by a database trigger, by selecting the row by some
                                unique key and retrieving the primary key value.
                                See <a href="mapping.html#mapping-declaration-id-select" title="5.1.5.8.&nbsp;Primary keys assigned by triggers">Section&nbsp;5.1.5.8, &#8220;Primary keys assigned by triggers&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">foreign</tt></span></dt><dd><p>
                                uses the identifier of another associated object. It is usually used in conjunction
                                with a <tt class="literal">&lt;one-to-one&gt;</tt> primary key association.
                            </p></dd><dt><span class="term"><tt class="literal">sequence-identity</tt></span></dt><dd><p>
                                a generator which combines sequence generation with immediate retrieval
                                by attaching an output parameter to the SQL command.
                                In this respect it works much like ANSI-SQL identity generation.
                            </p></dd><dt><span class="term"><tt class="literal">trigger-identity</tt></span></dt><dd><p>
                                a generator which uses an output parameter to return the identifier generated by the insert
                                on database server side.
                            </p></dd><dt><span class="term"><tt class="literal">enhanced-sequence</tt></span></dt><dd><p>
                                uses a sequence with database supporting them, otherwise uses a table for emulating the sequence.
                                See <a href="mapping.html#mapping-declaration-id-enhanced" title="5.1.5.9.&nbsp;Enhanced identifier generators">Section&nbsp;5.1.5.9, &#8220;Enhanced identifier generators&#8221;</a>. Supports
                                <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.5.9.1.&nbsp;Identifier generator optimization">Section&nbsp;5.1.5.9.1, &#8220;Identifier generator optimization&#8221;</a>.
                            </p></dd><dt><span class="term"><tt class="literal">enhanced-table</tt></span></dt><dd><p>
                                uses a table like the <tt class="literal">hilo</tt> generator, but can handle multiple increment values
                                per table. See <a href="mapping.html#mapping-declaration-id-enhanced" title="5.1.5.9.&nbsp;Enhanced identifier generators">Section&nbsp;5.1.5.9, &#8220;Enhanced identifier generators&#8221;</a>. Supports
                                <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.5.9.1.&nbsp;Identifier generator optimization">Section&nbsp;5.1.5.9.1, &#8220;Identifier generator optimization&#8221;</a>.
                            </p></dd></dl></div><p>

                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-hilo"></a>5.1.5.2.&nbsp;Hi/Lo Algorithm</h4></div></div><div></div></div><p>
                    The <tt class="literal">hilo</tt> and <tt class="literal">seqhilo</tt> generators provide two alternate
                    implementations of the hi/lo algorithm, a favorite approach to identifier generation. The
                    first implementation requires a "special" database table to hold the next available "hi" value.
                    The second uses an Oracle-style sequence (where supported).
                </p><p>
                    Unfortunately, you can't use <tt class="literal">hilo</tt> when supplying your own
                    <tt class="literal">DbConnection</tt> to NHibernate. NHibernate must be able to
                    fetch the "hi" value in a new transaction.
                </p><pre class="programlisting">&lt;id name="Id" type="Int64" column="cat_id"&gt;
    &lt;generator class="hilo"&gt;
        &lt;param name="table"&gt;tableName&lt;/param&gt;
        &lt;param name="column"&gt;columnName&lt;/param&gt;
        &lt;param name="schema"&gt;schemaName&lt;/param&gt;
        &lt;param name="catalog"&gt;catalogName&lt;/param&gt;
        &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;param name="where"&gt;arbitraryWhereClause&lt;/param&gt;
    &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                    <tt class="literal">table</tt> defaults to <tt class="literal">hibernate_unique_key</tt>,
                    <tt class="literal">column</tt> defaults to <tt class="literal">next_hi</tt>,
                    and <tt class="literal">max_lo</tt> defaults to <tt class="literal">32767</tt>.
                    <tt class="literal">schema</tt>, <tt class="literal">catalog</tt> and <tt class="literal">where</tt>
                    are optional and have no default value.
                </p><p>
                    You can use the optional <tt class="literal">where</tt> parameter to specify the row to use in a table. This is
                    useful if you want to use a single table for your identifiers, with different rows for each table. Do not
                    include the <tt class="literal">where</tt> keyword in its value.
                    This is not handled by NHibernate schema generation tooling.
                </p><pre class="programlisting">&lt;id name="Id" type="Int64" column="cat_id"&gt;
    &lt;generator class="seqhilo"&gt;
        &lt;param name="sequence"&gt;hi_value&lt;/param&gt;hibernate_sequence
        &lt;param name="schema"&gt;schemaName&lt;/param&gt;
        &lt;param name="catalog"&gt;catalogName&lt;/param&gt;
        &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;param name="parameters"&gt;arbitrarySqlFragment&lt;/param&gt;
    &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                    <tt class="literal">sequence</tt> defaults to <tt class="literal">hibernate_sequence</tt>,
                    and <tt class="literal">max_lo</tt> defaults to <tt class="literal">9</tt>.
                    <tt class="literal">schema</tt>, <tt class="literal">catalog</tt> and <tt class="literal">parameters</tt>
                    are optional and have no default value.
                </p><p>
                    You can use the optional <tt class="literal">parameters</tt> parameter to specify some SQL to be
                    appended to the create sequence DDL.
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-uuid-hex"></a>5.1.5.3.&nbsp;UUID Hex Algorithm</h4></div></div><div></div></div><pre class="programlisting">&lt;id name="Id" type="String" column="cat_id"&gt;
    &lt;generator class="uuid.hex"&gt;
        &lt;param name="format"&gt;format_value&lt;/param&gt;
        &lt;param name="separator"&gt;separator_value&lt;/param&gt;
    &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                    The UUID is generated by calling <tt class="literal">Guid.NewGuid().ToString(format)</tt>.
                    The valid values for <tt class="literal">format</tt> are described in the MSDN documentation.
                    The default <tt class="literal">separator</tt> is <tt class="literal">-</tt> and should rarely be
                    modified.  The <tt class="literal">format</tt> determines if the configured
                    <tt class="literal">separator</tt> can replace the default separator used by
                    the <tt class="literal">format</tt>.
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-uuid-string"></a>5.1.5.4.&nbsp;UUID String Algorithm</h4></div></div><div></div></div><p>
                    The UUID is generated by calling <tt class="literal">Guid.NewGuid().ToByteArray()</tt> and
                    then converting the <tt class="literal">byte[]</tt> into a <tt class="literal">char[]</tt>.  The
                    <tt class="literal">char[]</tt> is returned as a <tt class="literal">String</tt> consisting of
                    16 characters.
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-guid"></a>5.1.5.5.&nbsp;GUID Algorithms</h4></div></div><div></div></div><p>
                    The <tt class="literal">guid</tt> identifier is generated by calling <tt class="literal">Guid.NewGuid()</tt>.
                    To address some of the performance concerns with using Guids as primary keys, foreign keys, and
                    as part of indexes with MS SQL the <tt class="literal">guid.comb</tt> can be used.  The benefit of using
                    the <tt class="literal">guid.comb</tt> with other databases that support GUIDs has not been measured.
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-sequences"></a>5.1.5.6.&nbsp;Identity columns and Sequences</h4></div></div><div></div></div><p>
                    For databases which support identity columns (DB2, MySQL, Sybase, MS SQL), you
                    may use <tt class="literal">identity</tt> key generation. For databases that support
                    sequences (DB2, Oracle, PostgreSQL, Interbase, McKoi, SAP DB) you may use
                    <tt class="literal">sequence</tt> style key generation. Both these strategies require
                    two SQL queries to insert a new object.
                </p><pre class="programlisting">&lt;id name="Id" type="Int64" column="uid"&gt;
    &lt;generator class="sequence"&gt;
        &lt;param name="sequence"&gt;uid_sequence&lt;/param&gt;
    &lt;/generator&gt;
&lt;/id&gt;</pre><pre class="programlisting">&lt;id name="Id" type="Int64" column="uid"&gt;
    &lt;generator class="identity"/&gt;
&lt;/id&gt;</pre><p>
                    For cross-platform development, the <tt class="literal">native</tt> strategy will
                    choose from the <tt class="literal">identity</tt>, <tt class="literal">sequence</tt> and
                    <tt class="literal">hilo</tt> strategies, dependent upon the capabilities of the
                    underlying database.
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-assigned"></a>5.1.5.7.&nbsp;Assigned Identifiers</h4></div></div><div></div></div><p>
                    If you want the application to assign identifiers (as opposed to having
                    NHibernate generate them), you may use the <tt class="literal">assigned</tt> generator.
                    This special generator will use the identifier value already assigned to the
                    object's identifier property. Be very careful when using this feature to assign
                    keys with business meaning (almost always a terrible design decision).
                </p><p>
                    Due to its inherent nature, entities that use this generator may, when saved via
                    the ISession's SaveOrUpdate() method, cause NHibernate to query the database for
                    checking if the entity exist or not.
                </p><p>
                    To avoid this, either:
                </p><div class="itemizedlist"><ul type="disc"><li><p>
                            ensure that the identifier <tt class="literal">unsaved-value</tt> is not defined or is set
                            to <tt class="literal">undefined</tt>, and define an <tt class="literal">unsaved-value</tt> on
                            a <tt class="literal">&lt;version&gt;</tt> or <tt class="literal">&lt;timestamp&gt;</tt> property
                            mapping for the class. (Depending on the version type, its default
                            <tt class="literal">unsaved-value</tt> will generally already be suitable.)
                        </p></li><li><p>
                            specify to NHibernate if the object should be saved or updated by calling either the
                            <tt class="literal">Save()</tt> or <tt class="literal">Update()</tt> method of the ISession.
                        </p></li><li><p>
                            set <tt class="literal">unsaved-value="none"</tt> and explicitly <tt class="literal">Save()</tt>
                            newly instantiated objects.
                        </p></li><li><p>
                            set <tt class="literal">unsaved-value="any"</tt> and explicitly <tt class="literal">Update()</tt>
                            previously persistent objects.
                        </p></li><li><p>
                            implement <tt class="literal">IInterceptor.IsTransient()</tt> for providing your own strategy
                            for distinguishing newly instantiated objects. See
                            <a href="events.html#objectstate-interceptors" title="13.1.&nbsp;Interceptors">Section&nbsp;13.1, &#8220;Interceptors&#8221;</a>.
                        </p></li></ul></div><p>
                    For assigned identifiers, <tt class="literal">unsaved-value</tt> default value is
                    <tt class="literal">undefined</tt>.
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-select"></a>5.1.5.8.&nbsp;Primary keys assigned by triggers</h4></div></div><div></div></div><p>
                    NHibernate does not generate DDL with triggers. It is for legacy schemas only.
                </p><pre class="programlisting">&lt;id name="id" type="long" column="person_id"&gt;
    &lt;generator class="select"&gt;
        &lt;param name="key"&gt;socialSecurityNumber&lt;/param&gt;
    &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                    In the above example, there is a unique valued property named
                    <tt class="literal">socialSecurityNumber</tt>. It is defined by the class, as a property.
                    And a surrogate key named person_id has its value generated by a trigger. Its value
                    will be retrieved by querying the entity table filtered by the <tt class="literal">key</tt>
                    property.
                </p><p>
                    If the class maps a <a href="mapping.html#mapping-declaration-naturalid" title="5.1.13.&nbsp;natural-id">natural id</a>,
                    <tt class="literal">key</tt> can be omitted. The natural id will be used when
                    <tt class="literal">key</tt> is omitted.
                </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mapping-declaration-id-enhanced"></a>5.1.5.9.&nbsp;Enhanced identifier generators</h4></div></div><div></div></div><p>Starting with NHibernate release 3.3.0, there are two new generators which
                represent a re-thinking of two different aspects of identifier
                generation. The first aspect is database portability; the second is
                optimization. Optimization means that you do not have to query the
                database for every request for a new identifier value. These two new
                generators are intended to take the place of some of the named
                generators described above.</p><p>The first of these new generators is
                <tt class="literal">NHibernate.Id.Enhanced.SequenceStyleGenerator</tt>
                (short name <tt class="literal">enhanced-sequence</tt>)
                which is intended, firstly, as a replacement for the
                <tt class="literal">sequence</tt> generator and, secondly, as a better
                portability generator than <tt class="literal">native</tt>. This is because
                <tt class="literal">native</tt> generally chooses between
                <tt class="literal">identity</tt> and <tt class="literal">sequence</tt> which have
                largely different semantics that can cause subtle issues in
                applications eyeing portability.
                <tt class="literal">NHibernate.Id.Enhanced.SequenceStyleGenerator</tt>,
                however, achieves portability in a different manner. It chooses
                between a table or a sequence in the database to store its
                incrementing values, depending on the capabilities of the dialect
                being used. The difference between this and <tt class="literal">native</tt>
                is that table-based and sequence-based storage have the same exact
                semantic. In fact, sequences are exactly what NHibernate tries to
                emulate with its table-based generators. This generator has a number
                of configuration parameters: </p><div class="itemizedlist"><ul type="disc" compact><li><p><tt class="literal">sequence_name</tt> (optional - defaults to
                      <tt class="literal">hibernate_sequence</tt>): the name of the sequence
                      or table to be used. <tt class="literal">schema</tt> and
                      <tt class="literal">catalog</tt> parameters can be additionally used
                      to qualify the sequence name.</p></li><li><p><tt class="literal">initial_value</tt> (optional - defaults to
                      <tt class="literal">1</tt>): the initial value to be retrieved from
                      the sequence/table. In sequence creation terms, this is
                      analogous to the clause typically named "STARTS WITH".</p></li><li><p><tt class="literal">increment_size</tt> (optional - defaults to
                      <tt class="literal">1</tt>): the value by which subsequent calls to
                      the sequence/table should differ. In sequence creation terms,
                      this is analogous to the clause typically named "INCREMENT
                      BY".</p></li><li><p><tt class="literal">force_table_use</tt> (optional - defaults to
                      <tt class="literal">false</tt>): should we force the use of a table as
                      the backing structure even though the dialect might support
                      sequence?</p></li><li><p><tt class="literal">value_column</tt> (optional - defaults to
                      <tt class="literal">next_val</tt>): only relevant for table
                      structures, it is the name of the column on the table which is
                      used to hold the value.</p></li><li><p><tt class="literal">optimizer</tt> (optional - defaults to
                      <tt class="literal">none</tt> if <tt class="literal">increment_size</tt> is <tt class="literal">1</tt>):
                       See <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.5.9.1.&nbsp;Identifier generator optimization">Section&nbsp;5.1.5.9.1, &#8220;Identifier generator optimization&#8221;</a></p></li></ul></div><p>The second of these new generators is
                <tt class="literal">NHibernate.Id.Enhanced.TableGenerator</tt> (short name <tt class="literal">enhanced-table</tt>), which is
                intended, firstly, as a replacement for the <tt class="literal">table</tt>
                generator, even though it actually functions much more like
                <tt class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</tt> (not available in NHibernate), and
                secondly, as a re-implementation of
                <tt class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</tt> (not available in NHibernate) that
                utilizes the notion of pluggable optimizers. Essentially this
                generator defines a table capable of holding a number of different
                increment values simultaneously by using multiple distinctly keyed
                rows. This generator has a number of configuration parameters:
                </p><div class="itemizedlist"><ul type="disc" compact><li><p><tt class="literal">table_name</tt> (optional - defaults to
                      <tt class="literal">hibernate_sequences</tt>): the name of the table
                      to be used. <tt class="literal">schema</tt> and
                      <tt class="literal">catalog</tt> parameters can be additionally used
                      to qualify the sequence name.</p></li><li><p><tt class="literal">value_column_name</tt> (optional - defaults
                      to <tt class="literal">next_val</tt>): the name of the column on the
                      table that is used to hold the value.</p></li><li><p><tt class="literal">segment_column_name</tt> (optional -
                      defaults to <tt class="literal">sequence_name</tt>): the name of the
                      column on the table that is used to hold the "segment key". This
                      is the value which identifies which increment value to
                      use.</p></li><li><p><tt class="literal">segment_value</tt> (optional - defaults to
                      <tt class="literal">default</tt> unless
                      <tt class="literal">prefer_entity_table_as_segment_value</tt> is
                      <tt class="literal">true</tt>): The "segment key" value for the
                      segment from which we want to pull increment values for this
                      generator.</p></li><li><p><tt class="literal">segment_value_length</tt> (optional -
                      defaults to <tt class="literal">255</tt>): Used for schema generation;
                      the column size to create this segment key column.</p></li><li><p><tt class="literal">prefer_entity_table_as_segment_value</tt>
                      (optional - defaults to <tt class="literal">false</tt>): If
                      <tt class="literal">segment_value</tt> is not specified, whether it
                      should defaults to the entity table name or to
                      <tt class="literal">default</tt>.</p></li><li><p><tt class="literal">initial_value</tt> (optional - defaults to
                      <tt class="literal">1</tt>): The initial value to be retrieved from
                      the table.</p></li><li><p><tt class="literal">increment_size</tt> (optional - defaults to
                      <tt class="literal">1</tt>): The value by which subsequent calls to
                      the table should differ.</p></li><li><p><tt class="literal">optimizer</tt> (optional - defaults to
                      <tt class="literal">none</tt> if <tt class="literal">increment_size</tt> is <tt class="literal">1</tt>): See <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.5.9.1.&nbsp;Identifier generator optimization">Section&nbsp;5.1.5.9.1, &#8220;Identifier generator optimization&#8221;</a>.</p></li></ul></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="mapping-declaration-id-enhanced-optimizers"></a>5.1.5.9.1.&nbsp;Identifier generator optimization</h5></div></div><div></div></div><p>For identifier generators that store values in the database,
                  it is inefficient for them to hit the database on each and every
                  call to generate a new identifier value. Instead, you can group a
                  bunch of them in memory and only hit the database when you have
                  exhausted your in-memory value group. This is the role of the
                  pluggable optimizers. Currently only the two enhanced generators
                  (<a href="mapping.html#mapping-declaration-id-enhanced" title="5.1.5.9.&nbsp;Enhanced identifier generators">Section&nbsp;5.1.5.9, &#8220;Enhanced identifier generators&#8221;</a> support this
                  operation.</p><div class="itemizedlist"><ul type="disc" compact><li><p><tt class="literal">none</tt> (generally this is the default if
                      no optimizer was specified): this will not perform any
                      optimizations and hit the database for each and every
                      request.</p></li><li><p><tt class="literal">hilo</tt>: applies a hi/lo algorithm around
                      the database retrieved values. The values from the database for
                      this optimizer are expected to be sequential. The values
                      retrieved from the database structure for this optimizer
                      indicates the "group number". The
                      <tt class="literal">increment_size</tt> is multiplied by that value in
                      memory to define a group "hi value".</p></li><li><p><tt class="literal">pooled</tt>: as with the case of
                      <tt class="literal">hilo</tt>, this optimizer attempts to minimize the
                      number of hits to the database. Here, however, we simply store
                      the starting value for the "next group" into the database
                      structure rather than a sequential value in combination with an
                      in-memory grouping algorithm. Here,
                      <tt class="literal">increment_size</tt> refers to the values coming
                      from the database.</p></li><li><p><tt class="literal">pooled-lo</tt>: similar to
                      <tt class="literal">pooled</tt>, except that it's the starting value of
                      the "current group" that is stored into the database structure.
                      Here,
                      <tt class="literal">increment_size</tt> refers to the values coming
                      from the database.</p></li></ul></div></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-compositeid"></a>5.1.6.&nbsp;composite-id</h3></div></div><div></div></div><pre class="programlisting">&lt;composite-id
    name="propertyName"
    class="className"
    unsaved-value="any|none"
    access="field|property|nosetter|className"
    mapped="true|false"&gt;

    &lt;key-property name="propertyName" type="typeName" column="columnName"/&gt;
    &lt;key-many-to-one name="propertyName class="className" column="columnName"/&gt;
    ...
&lt;/composite-id&gt;</pre><p>
                For a table with a composite key, you may map multiple properties of the class
                as identifier properties. The <tt class="literal">&lt;composite-id&gt;</tt> element
                accepts <tt class="literal">&lt;key-property&gt;</tt> property mappings and
                <tt class="literal">&lt;key-many-to-one&gt;</tt> mappings as child elements.
            </p><pre class="programlisting">&lt;composite-id&gt;
    &lt;key-property name="MedicareNumber"/&gt;
    &lt;key-property name="Dependent"/&gt;
&lt;/composite-id&gt;</pre><p>
                Your persistent class <span class="emphasis"><em>must</em></span> override <tt class="literal">Equals()</tt>
                and <tt class="literal">GetHashCode()</tt> to implement composite identifier equality. It must
                also be marked with the <tt class="literal">Serializable</tt> attribute.
            </p><p>
                Unfortunately, this approach to composite identifiers means that a persistent object
                is its own identifier. There is no convenient "handle" other than the object itself.
                You must instantiate an instance of the persistent class itself and populate its
                identifier properties before you can <tt class="literal">Load()</tt> the persistent state
                associated with a composite key. We call this approach an embedded composite identifier,
                and discourage it for serious applications.
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        <tt class="literal">unsaved-value</tt> (optional - default to <tt class="literal">undefined</tt>):
                        controls how transient instances are considered. <tt class="literal">any</tt> assumes
                        any transient instance is newly instantiated. In other words, the instance will be
                        saved (inserted in the database). <tt class="literal">none</tt> assumes any transient instance
                        is already persisted. In other words, the instance will be updated.
                        <tt class="literal">undefined</tt> does not assume anything: NHibernate may query the database
                        for determining if the entity is already persisted or not.
                    </p></li><li><p>
                        <tt class="literal">mapped</tt> (optional - defaults to <tt class="literal">false</tt>):
                        This attribute has no usage in NHibernate.
                    </p></li></ul></div><p>
                A much more convenient approach is to implement the composite identifier as a separate class,
                as in <a href="components.html#components-compositeid" title="8.4.&nbsp;Components as composite identifiers">Section&nbsp;8.4, &#8220;Components as composite identifiers&#8221;</a>. The attributes described below apply only
                to this alternative approach:
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        <tt class="literal">name</tt> (optional, required for this approach): A property of
                        component type that holds the composite identifier (see <a href="components.html#components-compositeid" title="8.4.&nbsp;Components as composite identifiers">Section&nbsp;8.4, &#8220;Components as composite identifiers&#8221;</a>).
                    </p></li><li><p>
                        <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>):
                        The strategy NHibernate should use for accessing the property value.
                    </p></li><li><p>
                        <tt class="literal">class</tt> (optional - defaults to the property type determined by
                        reflection): The component class used as a composite identifier.
                    </p></li></ul></div><p>
                The second approach, an identifier component, is recommended for almost all applications.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-discriminator"></a>5.1.7.&nbsp;discriminator</h3></div></div><div></div></div><p>
                The <tt class="literal">&lt;discriminator&gt;</tt> element is required for polymorphic persistence
                using the table-per-class-hierarchy mapping strategy and declares a discriminator column of the
                table. The discriminator column contains marker values that tell the persistence layer what
                subclass to instantiate for a particular row. A restricted set of types may be used:
                <tt class="literal">String</tt>, <tt class="literal">Char</tt>, <tt class="literal">Int32</tt>,
                <tt class="literal">Byte</tt>, <tt class="literal">Short</tt>, <tt class="literal">Boolean</tt>,
                <tt class="literal">YesNo</tt>, <tt class="literal">TrueFalse</tt>.
            </p><div class="programlistingco"><pre class="programlisting">&lt;discriminator
    column="discriminatorColumn"                      <span class="co">(1)</span>
    type="discriminatorType"                          <span class="co">(2)</span>
    length="typeLength"                               <span class="co">(3)</span>
    not-null="true|false"                             <span class="co">(4)</span>
    force="true|false"                                <span class="co">(5)</span>
    insert="true|false"                               <span class="co">(6)</span>
    formula="arbitrary SQL expression"                <span class="co">(7)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (optional - defaults to <tt class="literal">class</tt>): the
                            name of the discriminator column.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (optional - defaults to <tt class="literal">String</tt>): a
                            name that indicates the NHibernate type
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">length</tt> (optional): if the type takes a length and does not
                            already specify it, its length.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-null</tt> (optional - defaults to <tt class="literal">true</tt>):
                            sets the column nullability for DDL generation.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">force</tt> (optional - defaults to <tt class="literal">false</tt>):
                            "force" NHibernate to specify allowed discriminator values even when retrieving 
                            all instances of the root class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt> (optional - defaults to <tt class="literal">true</tt>):
                            set this to <tt class="literal">false</tt> if your discriminator column is also part
                            of a mapped composite identifier.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula</tt> (optional): an arbitrary SQL expression that is
                            executed when a type has to be evaluated. Allows content-based discrimination.
                        </p></td></tr></table></div></div><p>
                Actual values of the discriminator column are specified by the
                <tt class="literal">discriminator-value</tt> attribute of the <tt class="literal">&lt;class&gt;</tt> and
                <tt class="literal">&lt;subclass&gt;</tt> elements.
            </p><p>
                The <tt class="literal">force</tt> attribute is only useful if the table contains rows with
                "extra" discriminator values that are not mapped to a persistent class. This will not
                usually be the case.
            </p><p>
                Using the <tt class="literal">formula</tt> attribute, you can declare an arbitrary SQL expression
                that will be used to evaluate the type of a row:
            </p><pre class="programlisting">&lt;discriminator
    formula="case when CLASS_TYPE in ('a', 'b', 'c') then 0 else 1 end"
    type="Int32"/&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-version"></a>5.1.8.&nbsp;version (optional)</h3></div></div><div></div></div><p>
                The <tt class="literal">&lt;version&gt;</tt> element is optional and indicates that
                the table contains versioned data. This is particularly useful if you plan to
                use <span class="emphasis"><em>long transactions</em></span> (see <a href="transactions.html#transactions-optimistic" title="12.4.&nbsp;Optimistic concurrency control">Section&nbsp;12.4, &#8220;Optimistic concurrency control&#8221;</a>).
            </p><div class="programlistingco"><pre class="programlisting">&lt;version
    column="versionColumn"                            <span class="co">(1)</span>
    name="propertyName"                               <span class="co">(2)</span>
    type="typeName"                                   <span class="co">(3)</span>
    access="field|property|nosetter|className"        <span class="co">(4)</span>
    unsaved-value="null|negative|undefined|value"     <span class="co">(5)</span>
    generated="never|always"                          <span class="co">(6)</span>
    insert="false|true"                               <span class="co">(7)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (optional - defaults to the property name): The name
                            of the column holding the version number.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The name of a property  of the persistent class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (optional - defaults to <tt class="literal">Int32</tt>):
                            The type of the version number.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): The
                            strategy NHibernate should use for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">unsaved-value</tt> (optional - defaults to a "sensible" value):
                            A version property value that indicates that an instance is newly instantiated
                            (unsaved), distinguishing it from transient instances that were saved or loaded
                            in a previous session. <tt class="literal">undefined</tt> specifies that nothing
                            should be assumed from the version property. The identifier check on its own
                            <tt class="literal">unsaved-value</tt> will take precedence, unless its own value is
                            <tt class="literal">undefined</tt>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">generated</tt> (optional - defaults to <tt class="literal">never</tt>):
                            Specifies that this version property value is actually generated by the database.
                            See the discussion of <a href="mapping.html#mapping-generated" title="5.6.&nbsp;Generated Properties">generated properties</a>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt> (optional - defaults to <tt class="literal">false</tt>):
                            This attribute has no usage in NHibernate.
                        </p></td></tr></table></div></div><p>
                Version may be of type <tt class="literal">Int64</tt>, <tt class="literal">Int32</tt>,
                <tt class="literal">Int16</tt>, <tt class="literal">Ticks</tt>, <tt class="literal">Timestamp</tt>,
                <tt class="literal">TimeSpan</tt>, <tt class="literal">datetimeoffset</tt>, ... (or their nullable
                counterparts in .NET 2.0 and higher). Any type implementing <tt class="literal">IVersionType</tt> is
                usable as a version.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-timestamp"></a>5.1.9.&nbsp;timestamp (optional)</h3></div></div><div></div></div><p>
                The optional <tt class="literal">&lt;timestamp&gt;</tt> element indicates that the table contains 
                timestamped data. This is intended as an alternative to versioning. Timestamps are by nature
                a less safe implementation of optimistic locking. However, sometimes the application might
                use the timestamps in other ways.
            </p><div class="programlistingco"><pre class="programlisting">&lt;timestamp
    column="timestampColumn"                          <span class="co">(1)</span>
    name="propertyName"                               <span class="co">(2)</span>
    access="field|property|nosetter|className"        <span class="co">(3)</span>
    unsaved-value="null|undefined"                    <span class="co">(4)</span>
    generated="never|always"                          <span class="co">(5)</span>
    source="vm|db"                                    <span class="co">(6)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (optional - defaults to the property name): The name
                            of a column holding the timestamp.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The name of a property of .NET type
                            <tt class="literal">DateTime</tt> of the persistent class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): The
                            strategy NHibernate should use for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">unsaved-value</tt> (optional - defaults to <tt class="literal">null</tt>):
                            A timestamp property value that indicates that an instance is newly instantiated
                            (unsaved), distinguishing it from transient instances that were saved or loaded
                            in a previous session. <tt class="literal">undefined</tt> specifies that nothing
                            should be assumed from the timestamp value. The identifier check on its own
                            <tt class="literal">unsaved-value</tt> will take precedence, unless its own value is
                            <tt class="literal">undefined</tt>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">generated</tt> (optional - defaults to <tt class="literal">never</tt>):
                            Specifies that this timestamp property value is actually generated by the database
                            on insert and updates.
                            See the discussion of <a href="mapping.html#mapping-generated" title="5.6.&nbsp;Generated Properties">generated properties</a>.
                            It should not to be confused with <tt class="literal">source</tt> value
                            <tt class="literal">db</tt>, which mandates NHibernate to retrieve the timestamp from the
                            database in a dedicated query, in order to get the new value to set in the next insert
                            or update.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">source</tt> (optional - defaults to <tt class="literal">vm</tt>): Where should
                            NHibernate retrieve the timestamp value from? From the database, or from the current
                            runtime? Database-based timestamps incur an overhead because NHibernate must hit the
                            database in order to determine the "next value". It is safer to use in clustered
                            environments. Not all dialects are known to support the retrieval of the database's
                            current timestamp. Others may also be unsafe for usage in locking due to lack of
                            precision.
                        </p></td></tr></table></div></div><p>
                Note that <tt class="literal">&lt;timestamp&gt;</tt> is equivalent to
                <tt class="literal">&lt;version type="datetime"&gt;</tt>, and <tt class="literal">&lt;timestamp source="db"&gt;</tt>
                is equivalent to <tt class="literal">&lt;version type="dbtimestamp"&gt;</tt>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-property"></a>5.1.10.&nbsp;property</h3></div></div><div></div></div><p>
                The <tt class="literal">&lt;property&gt;</tt> element declares a persistent property
                of the class.
            </p><div class="programlistingco"><pre class="programlisting">&lt;property
    name="propertyName"                               <span class="co">(1)</span>
    column="columnName"                               <span class="co">(2)</span>
    type="typeName"                                   <span class="co">(3)</span>
    update="true|false"                               <span class="co">(4)</span>
    insert="true|false"                               <span class="co">(4)</span>
    formula="arbitrary SQL expression"                <span class="co">(5)</span>
    access="field|property|className"                 <span class="co">(6)</span>
    optimistic-lock="true|false"                      <span class="co">(7)</span>
    generated="never|insert|always"                   <span class="co">(8)</span>
    lazy="true|false"                                 <span class="co">(9)</span>
    not-null="true|false"                             <span class="co">(10)</span>
    unique="true|false"                               <span class="co">(11)</span>
    unique-key="uniqueKeyName"                        <span class="co">(12)</span>
    index="indexName"                                 <span class="co">(13)</span>
    length="L"                                        <span class="co">(14)</span>
    precision="P"                                     <span class="co">(15)</span>
    scale="S"                                         <span class="co">(16)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: the name of the property of your class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (optional - defaults to the property name): the name
                            of the mapped database table column.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">type</tt> (optional): a name that indicates the NHibernate type.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">update, insert</tt> (optional - defaults to <tt class="literal">true</tt>):
                            specifies that the mapped columns should be included in SQL <tt class="literal">UPDATE</tt>
                            and/or <tt class="literal">INSERT</tt> statements. Setting both to <tt class="literal">false</tt>
                            allows a pure "derived" property whose value is initialized from some other
                            property that maps to the same column(s) or by a trigger or other application.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula</tt> (optional): an SQL expression that defines the value for a
                            <span class="emphasis"><em>computed</em></span> property. Computed properties do not have a column
                            mapping of their own.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): the
                            strategy NHibernate should use for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (optional - defaults to <tt class="literal">true</tt>):
                            specifies that updates to this property do or do not require acquisition of the
                            optimistic lock. In other words, determines if a version increment should occur when
                            this property is dirty.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">generated</tt> (optional - defaults to <tt class="literal">never</tt>):
                            specifies that this property value is actually generated by the database.
                            See the discussion of <a href="mapping.html#mapping-generated" title="5.6.&nbsp;Generated Properties">generated properties</a>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (optional - defaults to <tt class="literal">false</tt>):
                            specifies that this property is lazy. A lazy property is not loaded when
                            the object is initially loaded, unless the fetch mode has been overridden
                            in a specific query. Values for lazy properties are loaded when any lazy
                            property of the object is accessed. Having lazy properties causes instances
                            of the entity to be loaded as proxies. Theses proxies ignore the class
                            <tt class="literal">proxy</tt> setting and always derives from the persistent class,
                            requiring its members to be overridable.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-null</tt> (optional - defaults to <tt class="literal">false</tt>):
                            sets the column nullability for DDL generation.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique</tt> (optional - defaults to <tt class="literal">false</tt>):
                            sets the column uniqueness for DDL generation. Use <tt class="literal">unique-key</tt>
                            instead if the value is unique only in combination with other properties.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(12)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique-key</tt> (optional):
                            a logical name for an unique index for DDL generation. The column will be included in
                            the index, along with other columns sharing the same <tt class="literal">unique-key</tt>
                            logical name. The actual index name depends on the dialect.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(13)</td><td valign="top" align="left"><p>
                            <tt class="literal">index</tt> (optional):
                            a logical name for an index for DDL generation. The column will be included in
                            the index, along with other columns sharing the same <tt class="literal">index</tt> logical
                            name. The actual index name depends on the dialect.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(14)</td><td valign="top" align="left"><p>
                            <tt class="literal">length</tt> (optional): if the type takes a length and does not
                            already specify it, its length.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(15)</td><td valign="top" align="left"><p>
                            <tt class="literal">precision</tt> (optional): if the type takes a precision and does not
                            already specify it, its precision.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(16)</td><td valign="top" align="left"><p>
                            <tt class="literal">scale</tt> (optional): if the type takes a scale and does not
                            already specify it, its scale.
                        </p></td></tr></table></div></div><p>
                <span class="emphasis"><em>typeName</em></span> could be:
            </p><div class="orderedlist"><ol type="1" compact><li><p>
                        The name of a NHibernate basic type (eg. <tt class="literal">Int32, String, Char,
                        DateTime, Timestamp, Single, Byte[], Object, ...</tt>).
                    </p></li><li><p>
                        The name of a .NET type with a default basic type (eg. <tt class="literal">System.Int16, System.Single,
                        System.Char, System.String, System.DateTime, System.Byte[], ...</tt>).
                    </p></li><li><p>
                        The name of an enumeration type (eg. <tt class="literal">Eg.Color, Eg</tt>).
                    </p></li><li><p>
                        The name of a serializable .NET type.
                    </p></li><li><p>
                        The class name of a custom type (eg. <tt class="literal">Illflow.Type.MyCustomType</tt>).
                    </p></li></ol></div><p>
                Note that you have to specify full <span class="emphasis"><em>assembly-qualified</em></span> names for all
                except basic NHibernate types (unless you set <tt class="literal">assembly</tt>
                and/or <tt class="literal">namespace</tt> attributes of the
                <tt class="literal">&lt;hibernate-mapping&gt;</tt> element).
            </p><p>
                NHibernate supports .NET 2.0 <tt class="literal">Nullable</tt> types. These types are
                mostly treated the same as plain non-<tt class="literal">Nullable</tt> types internally.
                For example, a property of type <tt class="literal">Nullable&lt;Int32&gt;</tt> can be mapped
                using <tt class="literal">type="Int32"</tt> or <tt class="literal">type="System.Int32"</tt>.
            </p><p>
                If you do not specify a type, NHibernate will use reflection upon the named
                property to take a guess at the correct NHibernate type. NHibernate will try to
                interpret the name of the return class of the property getter using rules 2, 3,
                4 in that order. However, this is not always enough.
                In certain cases you will still need the <tt class="literal">type</tt>
                attribute. (For example, to distinguish between <tt class="literal">NHibernateUtil.DateTime</tt> and
                <tt class="literal">NHibernateUtil.UtcDateTime</tt>, or to specify a custom type.)
            </p><p>
                See also <a href="mapping.html#mapping-types" title="5.2.&nbsp;NHibernate Types">Section&nbsp;5.2, &#8220;NHibernate Types&#8221;</a>.
            </p><p>
                The <tt class="literal">access</tt> attribute lets you control how NHibernate will access
                the value of the property at runtime.  The value of the <tt class="literal">access</tt> attribute should
                be text formatted as <tt class="literal">access-strategy.naming-strategy</tt>.  The
                <tt class="literal">.naming-strategy</tt> is not always required.
                </p><div class="table"><a name="d0e5482"></a><p class="title"><b>Table&nbsp;5.1.&nbsp;Access Strategies</b></p><table summary="Access Strategies" border="1"><colgroup><col><col></colgroup><thead><tr><th>Access Strategy Name</th><th>Description</th></tr></thead><tbody><tr><td><tt class="literal">property</tt></td><td><p>
                                        The default implementation.  NHibernate uses the get/set accessors of
                                        the property.  No naming strategy should be used with this access strategy
                                        because the value of the <tt class="literal">name</tt> attribute is the name
                                        of the property.
                                    </p></td></tr><tr><td><tt class="literal">field</tt></td><td><p>
                                        NHibernate will access the field directly.  NHibernate uses the value
                                        of the <tt class="literal">name</tt> attribute as the name of the field.
                                        This can be used when a property's getter and setter contain extra actions
                                        that you don't want to occur when NHibernate is populating or reading
                                        the object. If you want the name of the property and not the field to
                                        be what the consumers of your API use with HQL, then a naming strategy
                                        is needed.
                                    </p></td></tr><tr><td><tt class="literal">backfield</tt></td><td><p>
                                        NHibernate will access the field of an auto-property directly.
                                        This can be used when a property's setter is not accessible.
                                    </p></td></tr><tr><td><tt class="literal">nosetter</tt></td><td><p>
                                        NHibernate will access the field directly when setting the value and will use the
                                        Property when getting the value.  This can be used when a property only exposes
                                        a get accessor because the consumers of your API can't change the value directly.
                                        A naming strategy is required because NHibernate uses the value of the
                                        <tt class="literal">name</tt> attribute as the property name and needs to
                                        be told what the name of the field is.
                                    </p></td></tr><tr><td><tt class="literal">readonly</tt></td><td><p>
                                        Access the mapped property through a Property <tt class="literal">get</tt> to get the value
                                        and do nothing to set the value. This is useful to allow calculated properties in the
                                        domain that will never be recovered from the DB but can be used for querying.
                                    </p></td></tr><tr><td><tt class="literal">noop</tt> / <tt class="literal">none</tt></td><td><p>
                                        Used to declare properties not represented at the poco level.
                                    </p></td></tr><tr><td><tt class="literal">className</tt></td><td><p>
                                        If NHibernate's built in access strategies are not what is needed for your situation
                                        then you can build your own by implementing the interface 
                                        <tt class="literal">NHibernate.Property.IPropertyAccessor</tt>.  The value of the 
                                        <tt class="literal">access</tt> attribute should be an assembly-qualified name that can be
                                        loaded with <tt class="literal">Activator.CreateInstance(string assemblyQualifiedName)</tt>.
                                    </p></td></tr></tbody></table></div><p>
            </p><p>
                </p><div class="table"><a name="d0e5569"></a><p class="title"><b>Table&nbsp;5.2.&nbsp;Naming Strategies</b></p><table summary="Naming Strategies" border="1"><colgroup><col><col></colgroup><thead><tr><th>Naming Strategy Name</th><th>Description</th></tr></thead><tbody><tr><td><tt class="literal">camelcase</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is converted to camel case to find the field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">fooBar</tt>.
                                    </p></td></tr><tr><td><tt class="literal">camelcase-underscore</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is converted to camel case and prefixed with an
                                        underscore to find the field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">_fooBar</tt>.
                                    </p></td></tr><tr><td><tt class="literal">camelcase-m-underscore</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is converted to camel case and prefixed with
                                        the character <tt class="literal">m</tt> and an underscore to find the field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">m_fooBar</tt>.
                                    </p></td></tr><tr><td><tt class="literal">lowercase</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is converted to lower case to find the Field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">foobar</tt>.
                                    </p></td></tr><tr><td><tt class="literal">lowercase-underscore</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is converted to lower case and prefixed with an
                                        underscore to find the Field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">_foobar</tt>.
                                    </p></td></tr><tr><td><tt class="literal">pascalcase-underscore</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is prefixed with an underscore to find the field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">_FooBar</tt>.
                                    </p></td></tr><tr><td><tt class="literal">pascalcase-m</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is prefixed with the character
                                        <tt class="literal">m</tt> to find the field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">mFooBar</tt>.
                                    </p></td></tr><tr><td><tt class="literal">pascalcase-m-underscore</tt></td><td><p>
                                        The <tt class="literal">name</tt> attribute is prefixed with the character
                                        <tt class="literal">m</tt> and an underscore to find the field.
                                        <tt class="literal">&lt;property name="FooBar" ... &gt;</tt> uses the field <tt class="literal">m_FooBar</tt>.
                                    </p></td></tr></tbody></table></div><p>
            </p><p>
                A powerful feature is derived properties. These properties are by definition read-only. The property value is computed at
                load time. You declare the computation as an SQL expression. This then translates to a <tt class="literal">SELECT</tt> clause
                subquery in the SQL query that loads an instance:
            </p><pre class="programlisting">&lt;property name="totalPrice"
    formula="( SELECT SUM (li.quantity*p.price) FROM LineItem li, Product p
                WHERE li.productId = p.productId
                AND li.customerId = customerId
                AND li.orderNumber = orderNumber )"/&gt;</pre><p>
                You can reference the entity table by not declaring an alias on a particular column. This would be
                <tt class="literal">customerId</tt> in the given example. You can also use the nested <tt class="literal">&lt;formula&gt;</tt> mapping
                element if you do not want to use the attribute.
            </p><p>
                The nested <tt class="literal">&lt;column&gt;</tt> mapping element can also be used instead of the <tt class="literal">column</tt>
                attribute.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-manytoone"></a>5.1.11.&nbsp;many-to-one</h3></div></div><div></div></div><p>
                An ordinary association to another persistent class is declared using a
                <tt class="literal">many-to-one</tt> element. The relational model is a
                many-to-one association. (It is really just an object reference.)
            </p><div class="programlistingco"><pre class="programlisting">&lt;many-to-one
    name="propertyName"                                    <span class="co">(1)</span>
    column="columnName"                                    <span class="co">(2)</span>
    class="className"                                      <span class="co">(3)</span>
    cascade="all|none|save-update|delete|delete-orphan|all-<span class="co">(4)</span>delete-orphan"
    fetch="join|select"                                    <span class="co">(5)</span>
    lazy="proxy|no-proxy|false"                            <span class="co">(6)</span>
    update="true|false"                                    <span class="co">(7)</span>
    insert="true|false"                                    <span class="co">(7)</span>
    property-ref="propertyNameFromAssociatedClass"         <span class="co">(8)</span>
    access="field|property|nosetter|className"             <span class="co">(9)</span>
    optimistic-lock="true|false"                           <span class="co">(10)</span>
    not-found="ignore|exception"                           <span class="co">(11)</span>
    entity-name="entityName"                               <span class="co">(12)</span>
    formula="arbitrary SQL expression"                     <span class="co">(13)</span>
    not-null="true|false"                                  <span class="co">(14)</span>
    unique="true|false"                                    <span class="co">(15)</span>
    unique-key="uniqueKeyName"                             <span class="co">(16)</span>
    index="indexName"                                      <span class="co">(17)</span>
    foreign-key="foreignKeyName"                           <span class="co">(18)</span>
    outer-join="auto|true|false"                           <span class="co">(19)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The name of the property.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt> (optional): The name of the column. This can also be
                            specified by nested <tt class="literal">&lt;column&gt;</tt> element(s).
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (optional - defaults to the property type
                            determined by reflection): The name of the associated class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade</tt> (optional): Specifies which operations should
                            be cascaded from the parent object to the associated object.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">fetch</tt> (optional - defaults to <tt class="literal">select</tt>):
                            Chooses between outer-join fetching or sequential select fetching.
                            <tt class="literal">join</tt> takes precedence over the <tt class="literal">lazy</tt>
                            attribute and causes the association to be eagerly fetched.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (optional - defaults to <tt class="literal">proxy</tt>):
                            By default, single point associations are proxied. <tt class="literal">lazy="no-proxy"</tt>
                            specifies that the property should be fetched lazily when the instance property is first
                            accessed. It works similarly to lazy properties, and causes the entity owning the
                            association to be proxied instead of the association. <tt class="literal">lazy="false"</tt>
                            specifies that the association will be eagerly fetched.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">update, insert</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Specifies that the mapped columns should be included in SQL <tt class="literal">UPDATE</tt>
                            and/or <tt class="literal">INSERT</tt> statements. Setting both to <tt class="literal">false</tt>
                            allows a pure "derived" association whose value is initialized from some other
                            property that maps to the same column(s) or by a trigger or other application.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">property-ref</tt> (optional): The name of a property of the associated
                            class that is joined to this foreign key. If not specified, the primary key of
                            the associated class is used.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): The
                            strategy NHibernate should use for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Specifies that updates to this property do or do not require acquisition of the
                            optimistic lock. In other words, determines if a version increment should occur when
                            this property is dirty.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(11)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-found</tt> (optional - defaults to <tt class="literal">exception</tt>):
                            Specifies how foreign keys that reference missing rows will be handled.
                            <tt class="literal">ignore</tt> will treat a missing row as a null association.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(12)</td><td valign="top" align="left"><p>
                            <tt class="literal">entity-name</tt> (optional): The entity name of the associated class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(13)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula</tt> (optional): An SQL expression that defines the value for
                            a <span class="emphasis"><em>computed</em></span> foreign key.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(14)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-null</tt> (optional - defaults to <tt class="literal">false</tt>): Enables
                            the DDL generation of a nullability constraint for the foreign key column.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(15)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique</tt> (optional - defaults to <tt class="literal">false</tt>): Enables
                            the DDL generation of an unique constraint for the foreign-key column.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(16)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique-key</tt> (optional):
                            A logical name for an unique index for DDL generation. The column will be included in
                            the index, along with other columns sharing the same <tt class="literal">unique-key</tt>
                            logical name. The actual index name depends on the dialect.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(17)</td><td valign="top" align="left"><p>
                            <tt class="literal">index</tt> (optional):
                            A logical name for an index for DDL generation. The column will be included in
                            the index, along with other columns sharing the same <tt class="literal">index</tt> logical
                            name. The actual index name depends on the dialect.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(18)</td><td valign="top" align="left"><p>
                            <tt class="literal">foreign-key</tt> (optional): Specifies the name of the foreign key
                            constraint for DDL generation.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(19)</td><td valign="top" align="left"><p>
                            <tt class="literal">outer-join</tt> (optional): This attribute is obsoleted in favor of
                            <tt class="literal">fetch</tt>. <tt class="literal">auto</tt> is equivalent to not specifying
                            <tt class="literal">fetch</tt>, <tt class="literal">true</tt> is equivalent to
                            <tt class="literal">join</tt> and <tt class="literal">false</tt> is equivalent to
                            <tt class="literal">select</tt>. This obsolete attribute also appears on other elements,
                            with the same usage. It will be omitted from the documentation of these other
                            elements.
                        </p></td></tr></table></div></div><p>
                 Setting a value of the <tt class="literal">cascade</tt> attribute to any meaningful value other than
                 <tt class="literal">none</tt> will propagate certain operations to the associated object. The
                 meaningful values are divided into three categories. First, basic operations, which include:
                 <tt class="literal">persist</tt>, <tt class="literal">merge</tt>, <tt class="literal">delete</tt>,
                 <tt class="literal">save-update</tt>, <tt class="literal">evict</tt>, <tt class="literal">replicate</tt>,
                 <tt class="literal">lock</tt> and <tt class="literal">refresh</tt>; second, special values:
                 <tt class="literal">delete-orphan</tt>; and third, all comma-separated combinations of operation names:
                 <tt class="literal">cascade="persist,merge,evict"</tt> or <tt class="literal">cascade="all,delete-orphan"</tt>.
                 See <a href="manipulatingdata.html#manipulatingdata-graphs" title="10.10.&nbsp;Lifecycles and object graphs">Section&nbsp;10.10, &#8220;Lifecycles and object graphs&#8221;</a>.
            </p><p>
                Here is an example of a typical many-to-one declaration:
            </p><pre class="programlisting">&lt;many-to-one name="product" class="Product" column="PRODUCT_ID"/&gt;</pre><p>
                The <tt class="literal">property-ref</tt> attribute should only be used for mapping legacy data where a
                foreign key refers to a unique key of the associated table other than the primary key. This is a
                complicated and confusing relational model. For example, if the Product class had a unique serial
                number that is not the primary key, mapped as below:
            </p><pre class="programlisting">&lt;property name="serialNumber" unique="true" type="string" column="SERIAL_NUMBER"/&gt;</pre><p>
                The unique attribute controls NHibernate's DDL generation with the SchemaExport tool. Then the
                mapping for OrderItem might use:
            </p><pre class="programlisting">&lt;many-to-one name="product" property-ref="serialNumber" column="PRODUCT_SERIAL_NUMBER"/&gt;</pre><p>
                This is not encouraged, however.
            </p><p>
                If the referenced unique key comprises multiple properties of the associated entity, you should map
                the referenced properties inside a named <tt class="literal">&lt;properties&gt;</tt> element.
            </p><p>
                If the referenced unique key is the property of a component, you can specify a property path:
            </p><pre class="programlisting">&lt;many-to-one name="owner" property-ref="Identity.Ssn" column="OWNER_SSN"/&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-onetoone"></a>5.1.12.&nbsp;one-to-one</h3></div></div><div></div></div><p>
                A one-to-one association to another persistent class is declared using a
                <tt class="literal">one-to-one</tt> element.
            </p><div class="programlistingco"><pre class="programlisting">&lt;one-to-one
    name="propertyName"                                    <span class="co">(1)</span>
    class="className"                                      <span class="co">(2)</span>
    cascade="all|none|save-update|delete|delete-orphan|all-<span class="co">(3)</span>delete-orphan"
    constrained="true|false"                               <span class="co">(4)</span>
    fetch="join|select"                                    <span class="co">(5)</span>
    lazy="proxy|no-proxy|false"                            <span class="co">(6)</span>
    property-ref="propertyNameFromAssociatedClass"         <span class="co">(7)</span>
    access="field|property|nosetter|className"             <span class="co">(8)</span>
    formula="any SQL expression"                           <span class="co">(9)</span>
    entity-name="entityName"                               <span class="co">(10)</span>
    foreign-key="foreignKeyName"                           <span class="co">(11)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The name of the property.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (optional - defaults to the property type
                            determined by reflection): The name of the associated class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade</tt> (optional): Specifies which operations should
                            be cascaded from the parent object to the associated object.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">constrained</tt> (optional - default to <tt class="literal">false</tt>):
                            Specifies that a foreign key constraint on the primary key of the mapped table
                            references the table of the associated class. This option affects the order in
                            which <tt class="literal">Save()</tt> and <tt class="literal">Delete()</tt> are cascaded,
                            and determines whether the association can be proxied. It is also used by the
                            schema export tool.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">fetch</tt> (optional - defaults to <tt class="literal">select</tt>):
                            Chooses between outer-join fetching or sequential select fetching.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (optional - defaults to <tt class="literal">proxy</tt>):
                            By default, single point associations are proxied. <tt class="literal">lazy="no-proxy"</tt>
                            specifies that the property should be fetched lazily when the instance property is first
                            accessed. It works similarly to lazy properties, and causes the entity owning the
                            association to be proxied instead of the association. <tt class="literal">lazy="false"</tt>
                            specifies that the association will be eagerly fetched. <span class="emphasis"><em>Note that if
                            <tt class="literal">constrained="false"</tt>, proxying the association is impossible and
                            NHibernate will eagerly fetch the association.</em></span>
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">property-ref</tt>: (optional): The name of a property of the associated class
                            that is joined to the primary key of this class (or to the <tt class="literal">formula</tt> of
                            this association). If not specified, the primary key of the associated class is used.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): The
                            strategy NHibernate should use for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">formula</tt> (optional): Almost all one-to-one associations map to the primary
                            key of the owning entity. If this is not the case, you can specify another column or expression
                            to join on using an SQL formula. This can also be specified by nested
                            <tt class="literal">&lt;formula&gt;</tt> element(s).
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">entity-name</tt> (optional): The entity name of the associated class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">foreign-key</tt> (optional): Specifies the name of the foreign key
                            constraint for DDL generation.
                        </p></td></tr></table></div></div><p>
                There are two varieties of one-to-one association:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                primary key associations
            </p></li><li><p>
                unique foreign key associations
            </p></li></ul></div><p>
                Primary key associations don't need an extra table column; if two rows are related by
                the association then the two table rows share the same primary key value. So if you want 
                two objects to be related by a primary key association, you must make sure that they
                are assigned the same identifier value!
            </p><p>
                For a primary key association, add the following mappings to <tt class="literal">Employee</tt> and 
                <tt class="literal">Person</tt>, respectively.
            </p><pre class="programlisting">&lt;one-to-one name="Person" class="Person"/&gt;</pre><pre class="programlisting">&lt;one-to-one name="Employee" class="Employee" constrained="true"/&gt;</pre><p>
                Now we must ensure that the primary keys of related rows in the PERSON and
                EMPLOYEE tables are equal. We use a special NHibernate identifier generation strategy
                called <tt class="literal">foreign</tt>:
            </p><pre class="programlisting">&lt;class name="Person" table="PERSON"&gt;
    &lt;id name="Id" column="PERSON_ID"&gt;
        &lt;generator class="foreign"&gt;
            &lt;param name="property"&gt;Employee&lt;/param&gt;
        &lt;/generator&gt;
    &lt;/id&gt;
    ...
    &lt;one-to-one name="Employee"
        class="Employee"
        constrained="true"/&gt;
&lt;/class&gt;</pre><p>
                A newly saved instance of <tt class="literal">Person</tt> is then assigned the same primary
                key value as the <tt class="literal">Employee</tt> instance referred with the <tt class="literal">Employee</tt>
                property of that <tt class="literal">Person</tt>.
            </p><p>
                Alternatively, a foreign key with a unique constraint, from <tt class="literal">Employee</tt> to 
                <tt class="literal">Person</tt>, may be expressed as:
            </p><pre class="programlisting">&lt;many-to-one name="Person" class="Person" column="PERSON_ID" unique="true"/&gt;</pre><p>
                And this association may be made bidirectional by adding the following to the 
                <tt class="literal">Person</tt> mapping:
            </p><pre class="programlisting">&lt;one-to-one name="Employee" class="Employee" property-ref="Person"/&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-naturalid"></a>5.1.13.&nbsp;natural-id</h3></div></div><div></div></div><pre class="programlisting">&lt;natural-id mutable="true|false"/&gt;
    &lt;property ... /&gt;
    &lt;many-to-one ... /&gt;
    ...
&lt;/natural-id&gt;</pre><p>
                Even though we recommend the use of surrogate keys as primary keys, you should still try
                to identify natural keys for all entities. A natural key is a property or combination of
                properties that is unique and non-null. If it is also immutable, even better. Map the
                properties of the natural key inside the <tt class="literal">&lt;natural-id&gt;</tt> element.
                NHibernate will generate the necessary unique key and nullability constraints, and your
                mapping will be more self-documenting.
            </p><p>
                The <tt class="literal">&lt;natural-id&gt;</tt> element can only appear before the other
                properties, including version.
            </p><p>
                We strongly recommend that you implement <tt class="literal">Equals()</tt> and
                <tt class="literal">GetHashCode()</tt> to compare the natural key properties of the entity.
            </p><p>
                This mapping is not intended for use with entities with natural primary keys.
            </p><div class="itemizedlist"><ul type="disc" compact><li><p>
                        <tt class="literal">mutable</tt> (optional, defaults to <tt class="literal">false</tt>):
                        By default, natural identifier properties as assumed to be immutable (constant).
                    </p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-component"></a>5.1.14.&nbsp;component, dynamic-component</h3></div></div><div></div></div><p>
                The <tt class="literal">&lt;component&gt;</tt> element maps properties of a
                child object to columns of the table of a parent class. Components may, in
                turn, declare their own properties, components or collections. See
                <a href="components.html" title="Chapter&nbsp;8.&nbsp;Component Mapping">Chapter&nbsp;8, <i>Component Mapping</i></a>.
            </p><div class="programlistingco"><pre class="programlisting">&lt;component
    name="propertyName"                                    <span class="co">(1)</span>
    class="className"                                      <span class="co">(2)</span>
    insert="true|false"                                    <span class="co">(3)</span>
    update="true|false"                                    <span class="co">(4)</span>
    access="field|property|nosetter|className"             <span class="co">(5)</span>
    optimistic-lock="true|false"                           <span class="co">(6)</span>
    lazy="true|false"                                      <span class="co">(7)</span>
    unique="true|false"&gt;                                   <span class="co">(8)</span>

        &lt;property ... /&gt;
        &lt;many-to-one ... /&gt;
        ...
&lt;/component&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The name of the property.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt> (optional - defaults to the property type
                            determined by reflection): The name of the component (child) class.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Do the mapped columns appear in SQL <tt class="literal">INSERT</tt>s?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">update</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Do the mapped columns appear in SQL <tt class="literal">UPDATE</tt>s?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): The
                            strategy NHibernate should use for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Specifies that updates to this component do or do not require acquisition of the
                            optimistic lock. In other words, determines if a version increment should occur when
                            this property is dirty.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (optional - defaults to <tt class="literal">false</tt>): Specifies
                            that this component should be fetched lazily when the instance property is first
                            accessed. For more informations, see <tt class="literal">lazy</tt> on
                            <a href="mapping.html#mapping-declaration-property" title="5.1.10.&nbsp;property"><tt class="literal">property</tt> element</a>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique</tt> (optional - defaults to <tt class="literal">false</tt>): Specifies
                            that an unique constraint exists upon all mapped columns of the component.
                        </p></td></tr></table></div></div><p>
                The child <tt class="literal">&lt;property&gt;</tt> tags map properties of the
                child class to table columns.
            </p><p>
                The <tt class="literal">&lt;component&gt;</tt> element allows a <tt class="literal">&lt;parent&gt;</tt>
                sub-element that maps a property of the component class as a reference back to the
                containing entity.
            </p><p>
                The <tt class="literal">&lt;dynamic-component&gt;</tt> element allows an <tt class="literal">IDictionary</tt>,
                <tt class="literal">IDictionary&lt;string, object&gt;</tt>, or a C# <tt class="literal">dynamic</tt> to be mapped
                as a component. When using dictionaries, the property names refer to keys of the dictionary. See
                <a href="components.html#components-dynamic" title="8.5.&nbsp;Dynamic components">Section&nbsp;8.5, &#8220;Dynamic components&#8221;</a>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-properties"></a>5.1.15.&nbsp;properties</h3></div></div><div></div></div><p>
            The <tt class="literal">&lt;properties&gt;</tt> element allows the
            definition of a named, logical grouping of the properties of a class.
            The most important use of the construct is that it allows a combination
            of properties to be the target of a <tt class="literal">property-ref</tt>. It
            is also a convenient way to define a multi-column unique constraint. For
            example:
          </p><div class="programlistingco"><pre class="programlisting">&lt;properties
    name="logicalName"                                     <span class="co">(1)</span>
    insert="true|false"                                    <span class="co">(2)</span>
    update="true|false"                                    <span class="co">(3)</span>
    optimistic-lock="true|false"                           <span class="co">(4)</span>
    unique="true|false"&gt;                                   <span class="co">(5)</span>

    &lt;property .../&gt;
    &lt;many-to-one .../&gt;
    ...
&lt;/properties&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                  <tt class="literal">name</tt>: the logical name of the grouping.
                  It is <span class="emphasis"><em>not</em></span> an actual property name.
                </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                  <tt class="literal">insert</tt> (optional - defaults to <tt class="literal">true</tt>):
                  do the mapped columns appear in SQL <tt class="literal">INSERTs</tt>?
                </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                  <tt class="literal">update</tt> (optional - defaults to <tt class="literal">true</tt>):
                  do the mapped columns appear in SQL <tt class="literal">UPDATEs</tt>?
                </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                  <tt class="literal">optimistic-lock</tt> (optional - defaults to
                  <tt class="literal">true</tt>): specifies that updates to these
                  properties either do or do not require acquisition of the
                  optimistic lock. It determines if a version increment should occur
                  when these properties are dirty.
                </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                  <tt class="literal">unique</tt> (optional - defaults to
                  <tt class="literal">false</tt>): specifies that a unique constraint
                  exists upon all mapped columns of the component.
                </p></td></tr></table></div></div><p>
            For example, if we have the following
            <tt class="literal">&lt;properties&gt;</tt> mapping:
          </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="personNumber" /&gt;
    &lt;properties name="name" unique="true" update="false"&gt;
        &lt;property name="firstName" /&gt;
        &lt;property name="lastName" /&gt;
        &lt;property name="initial" /&gt;
    &lt;/properties&gt;
&lt;/class&gt;</pre><p>
            You might have some legacy data association that refers to this
            unique key of the <tt class="literal">Person</tt> table, instead of to the
            primary key:
          </p><pre class="programlisting">&lt;many-to-one name="owner" class="Person" property-ref="name"&gt;
    &lt;column name="firstName" /&gt;
    &lt;column name="lastName" /&gt;
    &lt;column name="initial" /&gt;
&lt;/many-to-one&gt;</pre><p>
            The use of this outside the context of mapping legacy data is not
            recommended.
          </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-subclass"></a>5.1.16.&nbsp;subclass</h3></div></div><div></div></div><p>
                Polymorphic persistence requires the declaration of each subclass of
                the root persistent class. For the (recommended) table-per-class-hierarchy
                mapping strategy, the <tt class="literal">&lt;subclass&gt;</tt> declaration is used.
            </p><div class="programlistingco"><pre class="programlisting">&lt;subclass
    name="className"                                  <span class="co">(1)</span>
    discriminator-value="discriminatorValue"          <span class="co">(2)</span>
    extends="superclassName"                          <span class="co">(3)</span>
    ...&gt;                                              <span class="co">(4)</span>

    &lt;property ... /&gt;
    &lt;properties ... /&gt;
    ...
&lt;/subclass&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The fully qualified .NET class name of the
                            subclass, including its assembly name.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">discriminator-value</tt> (optional - defaults to the class name): A
                            value that distinguishes individual subclasses.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">extends</tt> (optional if the <tt class="literal">&lt;subclass&gt;</tt>
                            element is nested into its superclass mapping declaration): Specifies the name of
                            a mapped class as the superclass for the subclass.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            Many attributes available on the <tt class="literal">&lt;class&gt;</tt> mapping element
                            are also available on <tt class="literal">&lt;subclass&gt;</tt> with the same usage:
                            <tt class="literal">proxy</tt>, <tt class="literal">dynamic-update</tt>,
                            <tt class="literal">dynamic-insert</tt>, <tt class="literal">select-before-update</tt>,
                            <tt class="literal">persister</tt>, <tt class="literal">batch-size</tt>, <tt class="literal">lazy</tt>,
                            <tt class="literal">entity-name</tt>, <tt class="literal">abstract</tt>. See
                            <a href="mapping.html#mapping-declaration-class" title="5.1.3.&nbsp;class">Section&nbsp;5.1.3, &#8220;class&#8221;</a>.
                        </p></td></tr></table></div></div><p>
                Each subclass should declare its own persistent properties and subclasses.
                <tt class="literal">&lt;version&gt;</tt> and <tt class="literal">&lt;id&gt;</tt> properties
                are assumed to be inherited from the root class. Each subclass in a hierarchy must
                define a unique <tt class="literal">discriminator-value</tt>. If none is specified, the
                fully qualified .NET class name is used.
            </p><p>
                For information about inheritance mappings, see <a href="inheritance.html" title="Chapter&nbsp;9.&nbsp;Inheritance Mapping">Chapter&nbsp;9, <i>Inheritance Mapping</i></a>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-joinedsubclass"></a>5.1.17.&nbsp;joined-subclass</h3></div></div><div></div></div><p>
                Each subclass can also be mapped to its own table. This is called the table-per-subclass
                mapping strategy. An inherited state is retrieved by joining with the table of the
                superclass. To do this you use the <tt class="literal">&lt;joined-subclass&gt;</tt> element.
            </p><div class="programlistingco"><pre class="programlisting">&lt;joined-subclass
    name="className"                                  <span class="co">(1)</span>
    table="tableName"                                 <span class="co">(2)</span>
    extends="superclassName"                          <span class="co">(3)</span>
    ...&gt;                                              <span class="co">(4)</span>

    &lt;key ... /&gt;

    &lt;property ... /&gt;
    &lt;properties ... /&gt;
    ...
&lt;/joined-subclass&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The fully qualified class name of the subclass.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt> (optional - defaults to the unqualified subclass name):
                            The name of the subclass table.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">extends</tt> (optional if the <tt class="literal">&lt;joined-subclass&gt;</tt>
                            element is nested into its superclass mapping declaration): Specifies the name of
                            a mapped class as the superclass for the subclass.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            Many attributes available on the <tt class="literal">&lt;class&gt;</tt> mapping element
                            are also available on <tt class="literal">&lt;joined-subclass&gt;</tt> with the same usage:
                            <tt class="literal">schema</tt>, <tt class="literal">catalog</tt>, <tt class="literal">proxy</tt>,
                            <tt class="literal">subselect</tt>, <tt class="literal">dynamic-update</tt>,
                            <tt class="literal">dynamic-insert</tt>, <tt class="literal">select-before-update</tt>,
                            <tt class="literal">persister</tt>, <tt class="literal">batch-size</tt>, <tt class="literal">lazy</tt>,
                            <tt class="literal">entity-name</tt>, <tt class="literal">abstract</tt>, <tt class="literal">check</tt>,
                            <tt class="literal">schema-action</tt>. See <a href="mapping.html#mapping-declaration-class" title="5.1.3.&nbsp;class">Section&nbsp;5.1.3, &#8220;class&#8221;</a>.
                        </p></td></tr></table></div></div><p>
                No discriminator column is required for this mapping strategy. Each subclass must,
                however, declare a table column holding the object identifier using the
                <tt class="literal">&lt;key&gt;</tt> element. The mapping at the start of the chapter
                would be re-written as:
            </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Eg"
    namespace="Eg"&gt;

    &lt;class name="Cat" table="CATS"&gt;
        &lt;id name="Id" column="uid" type="Int64"&gt;
            &lt;generator class="hilo"/&gt;
        &lt;/id&gt;
        &lt;property name="BirthDate" type="Date"/&gt;
        &lt;property name="Color" not-null="true"/&gt;
        &lt;property name="Sex" not-null="true"/&gt;
        &lt;property name="Weight"/&gt;
        &lt;many-to-one name="Mate"/&gt;
        &lt;set name="Kittens"&gt;
            &lt;key column="MOTHER"/&gt;
            &lt;one-to-many class="Cat"/&gt;
        &lt;/set&gt;
        &lt;joined-subclass name="DomesticCat" table="DOMESTIC_CATS"&gt;
            &lt;key column="CAT"/&gt;
            &lt;property name="Name" type="String"/&gt;
        &lt;/joined-subclass&gt;
    &lt;/class&gt;

    &lt;class name="Dog"&gt;
        &lt;!-- mapping for Dog could go here --&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                For information about inheritance mappings, see <a href="inheritance.html" title="Chapter&nbsp;9.&nbsp;Inheritance Mapping">Chapter&nbsp;9, <i>Inheritance Mapping</i></a>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-unionsubclass"></a>5.1.18.&nbsp;union-subclass</h3></div></div><div></div></div><p>
               A third option is to map only the concrete classes of an inheritance hierarchy
               to tables, (the table-per-concrete-class strategy) where each table defines all
               persistent state of the class, including inherited state. In NHibernate, it is
               not absolutely necessary to explicitly map such inheritance hierarchies. You
               can simply map each class with a separate <tt class="literal">&lt;class&gt;</tt>
               declaration. However, if you wish use polymorphic associations (e.g. an association
               to the superclass of your hierarchy), you need to
               use the <tt class="literal">&lt;union-subclass&gt;</tt> mapping.
           </p><div class="programlistingco"><pre class="programlisting">&lt;union-subclass
    name="className"                                  <span class="co">(1)</span>
    table="tableName"                                 <span class="co">(2)</span>
    extends="superclassName"                          <span class="co">(3)</span>
    ...&gt;                                              <span class="co">(4)</span>

    &lt;property ... /&gt;
    &lt;properties ... /&gt;
    ...
&lt;/union-subclass&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: The fully qualified class name of the subclass.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt> (optional - defaults to the unqualified subclass name):
                            The name of the subclass table.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">extends</tt> (optional if the <tt class="literal">&lt;union-subclass&gt;</tt>
                            element is nested into its superclass mapping declaration): Specifies the name of
                            a mapped class as the superclass for the subclass.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            Many attributes available on the <tt class="literal">&lt;class&gt;</tt> mapping element
                            are also available on <tt class="literal">&lt;union-subclass&gt;</tt> with the same usage:
                            <tt class="literal">schema</tt>, <tt class="literal">catalog</tt>, <tt class="literal">proxy</tt>,
                            <tt class="literal">subselect</tt>, <tt class="literal">dynamic-update</tt>,
                            <tt class="literal">dynamic-insert</tt>, <tt class="literal">select-before-update</tt>,
                            <tt class="literal">persister</tt>, <tt class="literal">batch-size</tt>, <tt class="literal">lazy</tt>,
                            <tt class="literal">entity-name</tt>, <tt class="literal">abstract</tt>, <tt class="literal">check</tt>.
                            See <a href="mapping.html#mapping-declaration-class" title="5.1.3.&nbsp;class">Section&nbsp;5.1.3, &#8220;class&#8221;</a>.
                         </p></td></tr></table></div></div><p>
                No discriminator column or key column is required for this mapping strategy.
            </p><p>
                For information about inheritance mappings, see <a href="inheritance.html" title="Chapter&nbsp;9.&nbsp;Inheritance Mapping">Chapter&nbsp;9, <i>Inheritance Mapping</i></a>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-join"></a>5.1.19.&nbsp;join</h3></div></div><div></div></div><p>
                Using the <tt class="literal">&lt;join&gt;</tt> element, it is possible to map
                properties of one class to several tables, when there's a 1-to-1 relationship between the tables.
            </p><div class="programlistingco"><pre class="programlisting">&lt;join
    table="tableName"                            <span class="co">(1)</span>
    schema="owner"                               <span class="co">(2)</span>
    catalog="catalog"                            <span class="co">(3)</span>
    fetch="join|select"                          <span class="co">(4)</span>
    inverse="true|false"                         <span class="co">(5)</span>
    optional="true|false"                        <span class="co">(6)</span>
    subselect="SQL expression"&gt;                  <span class="co">(7)</span>

    &lt;key ... /&gt;

    &lt;property ... /&gt;
    ...
&lt;/join&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">table</tt>: The name of the joined table.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">schema</tt> (optional): Overrides the schema name specified by
                            the root <tt class="literal">&lt;hibernate-mapping&gt;</tt> element.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">catalog</tt> (optional): Overrides the catalog name specified by
                            the root <tt class="literal">&lt;hibernate-mapping&gt;</tt> element.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">fetch</tt> (optional - defaults to <tt class="literal">join</tt>):
                            If set to <tt class="literal">join</tt>, the default, NHibernate will use an inner join
                            to retrieve a <tt class="literal">&lt;join&gt;</tt> defined by a class or its superclasses
                            and an outer join for a <tt class="literal">&lt;join&gt;</tt> defined by a subclass.
                            If set to <tt class="literal">select</tt> then NHibernate will use a sequential select for
                            a <tt class="literal">&lt;join&gt;</tt> defined on a subclass, which will be issued only
                            if a row turns out to represent an instance of the subclass. Inner joins will still
                            be used to retrieve a <tt class="literal">&lt;join&gt;</tt> defined by the class and its
                            superclasses.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">inverse</tt> (optional - defaults to <tt class="literal">false</tt>):
                            If enabled, NHibernate will not try to insert or update the properties defined
                            by this join.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">optional</tt> (optional - defaults to <tt class="literal">false</tt>):
                            If enabled, NHibernate will insert a row only if the properties defined by this
                            join are non-null and will always use an outer join to retrieve the properties.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">subselect</tt> (optional): Maps an immutable and read-only join to
                            a database sub-select. This is useful if you want to have a view instead of a
                            table. See <a href="mapping.html#mapping-declaration-subselect" title="5.1.4.&nbsp;subselect">Section&nbsp;5.1.4, &#8220;subselect&#8221;</a> for more information.
                        </p></td></tr></table></div></div><p>
                For example, the address information for a person can be mapped to a separate
                table (while preserving value type semantics for all properties):
            </p><pre class="programlisting">&lt;class name="Person" table="PERSON"&gt;
    &lt;id name="id" column="PERSON_ID"&gt;...&lt;/id&gt;

    &lt;join table="ADDRESS"&gt;
        &lt;key column="ADDRESS_ID"/&gt;
        &lt;property name="address"/&gt;
        &lt;property name="zip"/&gt;
        &lt;property name="country"/&gt;
    &lt;/join&gt;
    ...</pre><p>
                This feature is often only useful for legacy data models, we recommend fewer
                tables than classes and a fine-grained domain model. However, it is useful
                for switching between inheritance mapping strategies in a single hierarchy, as
                explained later.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-key"></a>5.1.20.&nbsp;key</h3></div></div><div></div></div><p>
                The <tt class="literal">&lt;key&gt;</tt> element has featured a few times within this guide. It appears
                anywhere the parent mapping element defines a join to a new table that references the primary key
                of the original table. It also defines the foreign key in the joined table:
            </p><div class="programlistingco"><pre class="programlisting">&lt;key
        column="columnName"                      <span class="co">(1)</span>
        on-delete="noaction|cascade"             <span class="co">(2)</span>
        property-ref="propertyName"              <span class="co">(3)</span>
        not-null="true|false"                    <span class="co">(4)</span>
        update="true|false"                      <span class="co">(5)</span>
        unique="true|false"                      <span class="co">(6)</span>
        foreign-key="foreignKeyName"             <span class="co">(7)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">column</tt>: the name of the foreign key column. This can also be specified
                            by nested <tt class="literal">&lt;column&gt;</tt> element(s).
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">on-delete</tt> (optional - defaults to <tt class="literal">noaction</tt>): specifies
                            whether the foreign key constraint has database-level cascade delete enabled.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">property-ref</tt> (optional): specifies that the foreign key refers to columns
                            that are not the primary key of the original table. It is provided for legacy data.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">not-null</tt> (optional): specifies that the foreign key columns are not nullable.
                            This is implied whenever the foreign key is also part of the primary key.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">update</tt> (optional): specifies that the foreign key should never be updated.
                            This is implied whenever the foreign key is also part of the primary key.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">unique</tt> (optional): specifies that the foreign key should have a unique
                            constraint. This is implied whenever the foreign key is also the primary key.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">foreign-key</tt> (optional): specifies the name of the foreign key
                            constraint for DDL generation.
                        </p></td></tr></table></div></div><p>
                For systems where delete performance is important, we recommend that all keys should be defined
                <tt class="literal">on-delete="cascade"</tt>. NHibernate uses a database-level
                <tt class="literal">ON CASCADE DELETE</tt> constraint, instead of many individual <tt class="literal">DELETE</tt>
                statements. Be aware that this feature bypasses NHibernate's usual optimistic locking strategy for
                versioned data.
            </p><p>
                The <tt class="literal">not-null</tt> and <tt class="literal">update</tt> attributes are useful when mapping an
                unidirectional one-to-many association. If you map an unidirectional one-to-many association to a
                non-nullable foreign key, you <span class="emphasis"><em>must</em></span> declare the key column using
                <tt class="literal">&lt;key not-null="true"&gt;</tt>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-column"></a>5.1.21.&nbsp;column and formula elements</h3></div></div><div></div></div><p>
                Mapping elements which accept a <tt class="literal">column</tt> attribute will alternatively accept a
                <tt class="literal">&lt;column&gt;</tt> subelement. Likewise, <tt class="literal">&lt;formula&gt;</tt> is an
                alternative to the <tt class="literal">formula</tt> attribute. For example:
            </p><pre class="programlisting">&lt;column
        name="columnName"
        length="N"
        precision="N"
        scale="N"
        not-null="true|false"
        unique="true|false"
        unique-key="multicolumnUniqueKeyName"
        index="indexName"
        sql-type="sqlTypeName"
        check="SQL expression"
        default="SQL expression"/&gt;</pre><pre class="programlisting">&lt;formula&gt;SQL expression&lt;/formula&gt;</pre><p>
                Most of the attributes on <tt class="literal">column</tt> provide a means of tailoring the DDL during
                automatic schema generation. See <a href="toolsetguide.html#toolsetguide-s1-2" title="22.1.1.&nbsp;Customizing the schema">Section&nbsp;22.1.1, &#8220;Customizing the schema&#8221;</a>.
            </p><p>
                The <tt class="literal">column</tt> and <tt class="literal">formula</tt> elements can even be combined within
                the same property or association mapping to express, for example, exotic join conditions.
            </p><pre class="programlisting">&lt;many-to-one name="HomeAddress" class="Address"
        insert="false" update="false"&gt;
    &lt;column name="person_id" not-null="true" length="10"/&gt;
    &lt;formula&gt;'MAILING'&lt;/formula&gt;
&lt;/many-to-one&gt;</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-collections"></a>5.1.22.&nbsp;map, set, list, bag</h3></div></div><div></div></div><p>
                Collections are discussed in <a href="collections.html" title="Chapter&nbsp;6.&nbsp;Collection Mapping">Chapter&nbsp;6, <i>Collection Mapping</i></a>.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-declaration-import"></a>5.1.23.&nbsp;import</h3></div></div><div></div></div><p>
                Suppose your application has two persistent classes with the same name, and you don't want to
                specify the fully qualified name in NHibernate queries. Classes may be "imported" 
                explicitly, rather than relying upon <tt class="literal">auto-import="true"</tt>. You may even import 
                classes and interfaces that are not explicitly mapped.
            </p><pre class="programlisting">&lt;import class="System.Object" rename="Universe"/&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;import
    class="className"                  <span class="co">(1)</span>
    rename="shortName"                 <span class="co">(2)</span>
/&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">class</tt>: The fully qualified class name of any .NET class, including
                            its assembly name.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">rename</tt> (optional - defaults to the unqualified class name):
                            A name that may be used in the query language.
                        </p></td></tr></table></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-anymapping"></a>5.1.24.&nbsp;any</h3></div></div><div></div></div><p>
                There is one more type of property mapping. The <tt class="literal">&lt;any&gt;</tt> mapping element defines a
                polymorphic association to classes from multiple tables. This type of mapping requires more than one
                column. The first column contains the type of the associated entity. The remaining columns contain the
                identifier. It is impossible to specify a foreign key constraint for this kind of association. This is
                not the usual way of mapping polymorphic associations and you should use this only in special cases. For
                example, for audit logs, user session data, etc.
            </p><pre class="programlisting">&lt;any name="AnyEntity" id-type="long" meta-type="class"&gt;
    &lt;column name="type"/&gt;
    &lt;column name="id"/&gt;
&lt;/any&gt;</pre><p>
                The <tt class="literal">meta-type</tt> attribute allows the application to specify a custom type that maps
                database column values to persistent classes that have identifier properties of the type specified by
                <tt class="literal">id-type</tt>. If the meta-type is <tt class="literal">class</tt>, nothing else is required.
                The class full name will be persisted in the database as the type of the associated entity.
                On the other hand, if it is a basic type like <tt class="literal">int</tt> or <tt class="literal">char</tt>, you
                must specify the mapping from values to classes. Here is an example with <tt class="literal">string</tt>.
            </p><pre class="programlisting">&lt;any name="being" id-type="long" meta-type="string"&gt;
    &lt;meta-value value="ANIMAL_TYPE" class="Animal"/&gt;
    &lt;meta-value value="HUMAN_TYPE" class="Human"/&gt;
    &lt;meta-value value="ALIEN_TYPE" class="Alien"/&gt;
    &lt;column name="type"/&gt;
    &lt;column name="id"/&gt;
&lt;/any&gt;</pre><p>
                String types are a special case: they can be used without meta-values, in which case they will behave
                much like the <tt class="literal">class</tt> meta-type.
            </p><div class="programlistingco"><pre class="programlisting">&lt;any
    name="propertyName"                               <span class="co">(1)</span>
    id-type="idTypeName"                              <span class="co">(2)</span>
    meta-type="metaTypeName"                          <span class="co">(3)</span>
    cascade="cascadeStyle"                            <span class="co">(4)</span>
    access="field|property|className"                 <span class="co">(5)</span>
    optimistic-lock="true|false"                      <span class="co">(6)</span>
    lazy="true|false"                                 <span class="co">(7)</span>
    update="true|false"                               <span class="co">(8)</span>
    insert="true|false"                               <span class="co">(9)</span>
    index="indexName"&gt;                                <span class="co">(10)</span>

    &lt;meta-value ... /&gt;
    &lt;meta-value ... /&gt;
    ...
    &lt;column ... /&gt;
    &lt;column ... /&gt;
    ...
&lt;/any&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">name</tt>: the property name.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">id-type</tt>: the identifier type.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                            <tt class="literal">meta-type</tt> (optional - defaults to <tt class="literal">string</tt>): a type
                            that is allowed for a discriminator mapping, or <tt class="literal">class</tt>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p>
                            <tt class="literal">cascade</tt> (optional - defaults to <tt class="literal">none</tt>): the cascade style.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p>
                            <tt class="literal">access</tt> (optional - defaults to <tt class="literal">property</tt>): the strategy
                            Hibernate uses for accessing the property value.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p>
                            <tt class="literal">optimistic-lock</tt> (optional - defaults to <tt class="literal">true</tt>): specifies
                            that updates to this property either do or do not require acquisition of the optimistic lock.
                            It defines whether a version increment should occur if this property is dirty.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p>
                            <tt class="literal">lazy</tt> (optional - defaults to <tt class="literal">false</tt>): specifies that this
                            property should be fetched lazily when the it is first accessed. For more informations, see
                            <tt class="literal">lazy</tt> on
                            <a href="mapping.html#mapping-declaration-property" title="5.1.10.&nbsp;property"><tt class="literal">property</tt> element</a>.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p>
                            <tt class="literal">update</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Do the mapped columns appear in SQL <tt class="literal">UPDATE</tt>s?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p>
                            <tt class="literal">insert</tt> (optional - defaults to <tt class="literal">true</tt>):
                            Do the mapped columns appear in SQL <tt class="literal">INSERT</tt>s?
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p>
                            <tt class="literal">index</tt> (optional):
                            a logical name for an index for DDL generation. The column will be included in
                            the index, along with other columns sharing the same <tt class="literal">index</tt> logical
                            name. The actual index name depends on the dialect.
                        </p></td></tr></table></div></div><p>
                Do not confuse <tt class="literal">&lt;meta-value&gt;</tt> elements with <tt class="literal">&lt;meta&gt;</tt>
                elements. <tt class="literal">&lt;meta&gt;</tt> elements have no functionnal impact on
                <tt class="literal">&lt;any&gt;</tt>, see <a href="mapping.html#mapping-meta" title="5.8.&nbsp;Meta data">Section&nbsp;5.8, &#8220;Meta data&#8221;</a> for more information on them.
            </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-types"></a>5.2.&nbsp;NHibernate Types</h2></div></div><div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-entitiesvalues"></a>5.2.1.&nbsp;Entities and values</h3></div></div><div></div></div><p>
                To understand the behaviour of various .NET language-level objects with respect
                to the persistence service, we need to classify them into two groups:
            </p><p>
                An <span class="emphasis"><em>entity</em></span> exists independently of any other objects holding
                references to the entity. Contrast this with the usual .NET model where an
                unreferenced object is garbage collected. Entities must be explicitly saved and
                deleted (except that saves and deletions may be <span class="emphasis"><em>cascaded</em></span>
                from a parent entity to its children). This is different from the ODMG model of
                object persistence by reachability - and corresponds more closely to how
                application objects are usually used in large systems. Entities support
                circular and shared references. They may also be versioned.
            </p><p>
                An entity's persistent state consists of references to other entities and
                instances of <span class="emphasis"><em>value</em></span> types. Values are primitives,
                collections, components and certain immutable objects. Unlike entities, values
                (in particular collections and components) <span class="emphasis"><em>are</em></span>
                persisted and deleted by reachability. Since value objects (and primitives) are
                persisted and deleted along with their containing entity they may not be
                independently versioned. Values have no independent identity, so they cannot be
                shared by two entities or collections.
            </p><p>
                All NHibernate types except collections support null semantics if the .NET type
                is nullable (i.e. not derived from <tt class="literal">System.ValueType</tt>).
            </p><p>
                Up until now, we've been using the term "persistent class" to refer to
                entities. We will continue to do that. Strictly speaking, however, not all
                user-defined classes with persistent state are entities. A
                <span class="emphasis"><em>component</em></span> is a user defined class with value semantics.
            </p><p>
                The challenge is to map the .Net type system, and the developers' definition of
                entities and value types, to the SQL/database type system. The bridge between both
                systems is provided by NHibernate. For entities, <tt class="literal">&lt;class&gt;</tt>,
                <tt class="literal">&lt;subclass&gt;</tt> and so on are used. For value types we use
                <tt class="literal">&lt;property&gt;</tt>, <tt class="literal">&lt;component&gt;</tt>, etc.,
                that usually have a type attribute. The value of this attribute is the name of a
                NHibernate mapping type. NHibernate provides a range of mappings for standard .Net
                value types out of the box. You can write your own mapping types and implement
                your own custom conversion strategies.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-basictypes"></a>5.2.2.&nbsp;Basic value types</h3></div></div><div></div></div><p>
                The <span class="emphasis"><em>basic types</em></span> may be roughly categorized into three groups - <tt class="literal">System.ValueType</tt>
                types, <tt class="literal">System.Object</tt> types, and <tt class="literal">System.Object</tt> types for large objects.  Just like
                Columns for System.ValueType types can handle <tt class="literal">null</tt> values only if the entity property is properly
                typed with a <tt class="literal">Nullable&lt;T&gt;</tt>. Otherwise <tt class="literal">null</tt> will be replaced by the default
                value for the type when reading, and then will be overwritten by it when persisting the entity, potentially leading to
                phantom updates.
            </p><div class="table"><a name="d0e7284"></a><p class="title"><b>Table&nbsp;5.3.&nbsp;System.ValueType Mapping Types</b></p><table summary="System.ValueType Mapping Types" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>NHibernate Type</th><th>.NET Type</th><th>Database Type</th><th>Remarks</th></tr></thead><tbody><tr><td><tt class="literal">AnsiChar</tt></td><td><tt class="literal">System.Char</tt></td><td><tt class="literal">DbType.AnsiStringFixedLength - 1 char</tt></td><td><tt class="literal">type="AnsiChar"</tt> must be specified.</td></tr><tr><td><tt class="literal">Boolean</tt></td><td><tt class="literal">System.Boolean</tt></td><td><tt class="literal">DbType.Boolean</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Byte</tt></td><td><tt class="literal">System.Byte</tt></td><td><tt class="literal">DbType.Byte</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Char</tt></td><td><tt class="literal">System.Char</tt></td><td><tt class="literal">DbType.StringFixedLength - 1 char</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Currency</tt></td><td><tt class="literal">System.Decimal</tt></td><td><tt class="literal">DbType.Currency</tt></td><td><tt class="literal">type="Currency"</tt> must be specified.</td></tr><tr><td><tt class="literal">Date</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.Date</tt></td><td><tt class="literal">type="Date"</tt> must be specified.</td></tr><tr><td><tt class="literal">DateTime</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td>
                                Default when no <tt class="literal">type</tt> attribute specified. Does no
                                longer ignore fractional seconds since NHibernate v5.0.
                            </td></tr><tr><td><tt class="literal">DateTimeNoMs</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td><tt class="literal">type="DateTimeNoMs"</tt> must be specified. Ignores fractional seconds.
                                Available since NHibernate v5.0.
                            </td></tr><tr><td><tt class="literal">DateTime2</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime2</tt></td><td><tt class="literal">type="DateTime2"</tt> must be specified. Obsolete since
                                NHibernate v5.0, use <tt class="literal">DateTime</tt> instead.
                            </td></tr><tr><td><tt class="literal">DateTimeOffset</tt></td><td><tt class="literal">System.DateTimeOffset</tt></td><td><tt class="literal">DbType.DateTimeOffset</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">DbTimestamp</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td><tt class="literal">type="DbTimestamp"</tt> must be specified. When used as a
                                <tt class="literal">version</tt> field, uses the database's current time retrieved
                                in dedicated queries, rather than the client's current time. In case of lack of
                                database support, it falls back on the client's current time.
                            </td></tr><tr><td><tt class="literal">Decimal</tt></td><td><tt class="literal">System.Decimal</tt></td><td><tt class="literal">DbType.Decimal</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Double</tt></td><td><tt class="literal">System.Double</tt></td><td><tt class="literal">DbType.Double</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Guid</tt></td><td><tt class="literal">System.Guid</tt></td><td><tt class="literal">DbType.Guid</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Int16</tt></td><td><tt class="literal">System.Int16</tt></td><td><tt class="literal">DbType.Int16</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Int32</tt></td><td><tt class="literal">System.Int32</tt></td><td><tt class="literal">DbType.Int32</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Int64</tt></td><td><tt class="literal">System.Int64</tt></td><td><tt class="literal">DbType.Int64</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">LocalDateTime</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td><tt class="literal">type="LocalDateTime"</tt> must be specified. Ensures the
                                <tt class="literal">DateTimeKind</tt> is set to <tt class="literal">DateTimeKind.Local</tt>.
                                Throws if set with a date having another kind.
                                Does no longer ignore fractional seconds since NHibernate v5.0.
                            </td></tr><tr><td><tt class="literal">LocalDateTimeNoMs</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td><tt class="literal">type="LocalDateTimeNoMs"</tt> must be specified. Similar to
                                <tt class="literal">LocalDateTime</tt> but ignores fractional seconds.
                                Available since NHibernate v5.0.
                            </td></tr><tr><td><tt class="literal">PersistentEnum</tt></td><td>A <tt class="literal">System.Enum</tt></td><td>The <tt class="literal">DbType</tt> for the underlying value.</td><td>Do not specify <tt class="literal">type="PersistentEnum"</tt> in the mapping.  Instead 
                            specify the Assembly Qualified Name of the Enum or let NHibernate use Reflection to "guess" the Type.
                            The UnderlyingType of the Enum is used to determine the correct <tt class="literal">DbType</tt>.</td></tr><tr><td><tt class="literal">SByte</tt></td><td><tt class="literal">System.SByte</tt></td><td><tt class="literal">DbType.SByte</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Single</tt></td><td><tt class="literal">System.Single</tt></td><td><tt class="literal">DbType.Single</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Ticks</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.Int64</tt></td><td><tt class="literal">type="Ticks"</tt> must be specified. This is the recommended way to "timestamp" a
                                column, along with <tt class="literal">UtcTicks</tt>.
                            </td></tr><tr><td><tt class="literal">Time</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.Time</tt></td><td><tt class="literal">type="Time"</tt> must be specified.</td></tr><tr><td><tt class="literal">TimeAsTimeSpan</tt></td><td><tt class="literal">System.TimeSpan</tt></td><td><tt class="literal">DbType.Time</tt></td><td><tt class="literal">type="TimeAsTimeSpan"</tt> must be specified.</td></tr><tr><td><tt class="literal">TimeSpan</tt></td><td><tt class="literal">System.TimeSpan</tt></td><td><tt class="literal">DbType.Int64</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Timestamp</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td>
                                Obsolete, its <tt class="literal">Timestamp</tt> alias will be remapped to
                                <tt class="literal">DateTime</tt> in a future version.
                            </td></tr><tr><td><tt class="literal">TrueFalse</tt></td><td><tt class="literal">System.Boolean</tt></td><td><tt class="literal">DbType.AnsiStringFixedLength</tt> - 1 char either 'T' or 'F'</td><td><tt class="literal">type="TrueFalse"</tt> must be specified.</td></tr><tr><td><tt class="literal">UInt16</tt></td><td><tt class="literal">System.UInt16</tt></td><td><tt class="literal">DbType.UInt16</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">UInt32</tt></td><td><tt class="literal">System.UInt32</tt></td><td><tt class="literal">DbType.UInt32</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">UInt64</tt></td><td><tt class="literal">System.UInt64</tt></td><td><tt class="literal">DbType.UInt64</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">UtcDateTime</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td>
                                Ensures the <tt class="literal">DateTimeKind</tt> is set to <tt class="literal">DateTimeKind.Utc</tt>.
                                Throws if set with a date having another kind.
                                Does no longer ignore fractional seconds since NHibernate v5.0.
                            </td></tr><tr><td><tt class="literal">UtcDateTimeNoMs</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td><tt class="literal">type="UtcDateTimeNoMs"</tt> must be specified. Similar to
                                <tt class="literal">UtcDateTime</tt> but ignores fractional seconds.
                                Available since NHibernate v5.0.
                            </td></tr><tr><td><tt class="literal">UtcDbTimestamp</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.DateTime</tt> / <tt class="literal">DbType.DateTime2</tt><a name="basic_mapping.datetime-co" href="mapping.html#basic_mapping.datetime">(1)</a></td><td><tt class="literal">type="UtcDbTimestamp"</tt> must be specified. When used as a
                                <tt class="literal">version</tt> field, uses the database's current UTC time retrieved
                                in dedicated queries, rather than the client's current time. In case of lack of
                                database support, it falls back on the client's current time.
                            </td></tr><tr><td><tt class="literal">UtcTicks</tt></td><td><tt class="literal">System.DateTime</tt></td><td><tt class="literal">DbType.Int64</tt></td><td><tt class="literal">type="UtcTicks"</tt> must be specified. This is the recommended way to "timestamp" a
                                column, along with <tt class="literal">Ticks</tt>.
                                Ensures the <tt class="literal">DateTimeKind</tt> is set to <tt class="literal">DateTimeKind.Utc</tt>.
                                Throws if set with a date having another kind.
                            </td></tr><tr><td><tt class="literal">YesNo</tt></td><td><tt class="literal">System.Boolean</tt></td><td><tt class="literal">DbType.AnsiStringFixedLength</tt> - 1 char either 'Y' or 'N'</td><td><tt class="literal">type="YesNo"</tt> must be specified.</td></tr></tbody></table></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><a name="basic_mapping.datetime"></a><a href="#basic_mapping.datetime-co">(1)</a> </td><td valign="top" align="left"><p>
                  Since NHibernate v5.0 and if the dialect supports it, <tt class="literal">DbType.DateTime2</tt>
                  is used instead of <tt class="literal">DbType.DateTime</tt>. This may be disabled by setting
                  <tt class="literal">sql_types.keep_datetime</tt> to <tt class="literal">true</tt>.
                </p></td></tr></table></div><div class="table"><a name="d0e7922"></a><p class="title"><b>Table&nbsp;5.4.&nbsp;System.Object Mapping Types</b></p><table summary="System.Object Mapping Types" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>NHibernate Type</th><th>.NET Type</th><th>Database Type</th><th>Remarks</th></tr></thead><tbody><tr><td><tt class="literal">AnsiString</tt></td><td><tt class="literal">System.String</tt></td><td><tt class="literal">DbType.AnsiString</tt></td><td><tt class="literal">type="AnsiString"</tt> must be specified.</td></tr><tr><td><tt class="literal">CultureInfo</tt></td><td><tt class="literal">System.Globalization.CultureInfo</tt></td><td><tt class="literal">DbType.String</tt> - 5 chars for culture</td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Binary</tt></td><td><tt class="literal">System.Byte[]</tt></td><td><tt class="literal">DbType.Binary</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Type</tt></td><td><tt class="literal">System.Type</tt></td><td><tt class="literal">DbType.String</tt> holding Assembly Qualified Name.</td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">String</tt></td><td><tt class="literal">System.String</tt></td><td><tt class="literal">DbType.String</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr><tr><td><tt class="literal">Uri</tt></td><td><tt class="literal">System.Uri</tt></td><td><tt class="literal">DbType.String</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.</td></tr></tbody></table></div><p>
                String types use by default .Net default string equality, which is case sensitive and culture
                insensitive. When a string type is used as an identifier, if the underlying database string
                equality semantic differs, it may cause issues. For example, loading a children collection by
                a string parent key stored in a case insensitive column may cause matching children having
                their parent key differing by the case to be ignored by NHibernate by default.
            </p><p>
                String types comparer can be set for matching the database or column behavior. To set the
                default comparer for all string types, affect by code a <tt class="literal">StringComparer</tt> to
                <tt class="literal">AbstractStringType.DefaultComparer</tt> static property. To set the comparer used
                only for a specific <tt class="literal">&lt;property&gt;</tt> or <tt class="literal">&lt;id&gt;</tt>,
                specify its type as a sub-element and supply <tt class="literal">IgnoreCase</tt> and/or
                <tt class="literal">ComparerCulture</tt> parameters.
            </p><div class="programlistingco"><pre class="programlisting">&lt;id name="Id" generator="assigned"&gt;
    &lt;type name="string"&gt;
        &lt;param name="ComparerCulture"&gt;en-US&lt;/param&gt;   <span class="co">(1)</span>
        &lt;param name="IgnoreCase"&gt;true&lt;/param&gt;         <span class="co">(2)</span>
    &lt;/type&gt;
&lt;/id&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                            <tt class="literal">IgnoreCase</tt>: <tt class="literal">true</tt> for case insensitive comparisons.
                            Any other value will result in case sensitive comparisons.
                        </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                            <tt class="literal">ComparerCulture</tt>: <tt class="literal">Current</tt> for using the application
                            current culture, <tt class="literal">Invariant</tt> for using the invariant culture,
                            <tt class="literal">Ordinal</tt> for using ordinal comparison, or any valid culture name for
                            using another culture. By default, ordinal comparisons are used.
                        </p></td></tr></table></div></div><p>
                If you have many properties to map with these parameters, consider using <tt class="literal">&lt;typedef&gt;</tt>.
                See <a href="mapping.html#mapping-types-custom" title="5.2.3.&nbsp;Custom value types">Section&nbsp;5.2.3, &#8220;Custom value types&#8221;</a> for more information.
            </p><p>
                These settings should be used in order to match the database or column behavior. They are not taken into
                account by the hbm2ddl tool for generating the database schema. (In other words, it will not generate
                matching <tt class="literal">collate</tt> statements for SQL-Server.)
            </p><div class="table"><a name="d0e8093"></a><p class="title"><b>Table&nbsp;5.5.&nbsp;Large Object Mapping Types</b></p><table summary="Large Object Mapping Types" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>NHibernate Type</th><th>.NET Type</th><th>Database Type</th><th>Remarks</th></tr></thead><tbody><tr><td><tt class="literal">StringClob</tt></td><td><tt class="literal">System.String</tt></td><td><tt class="literal">DbType.String</tt></td><td><tt class="literal">type="StringClob"</tt> must be specified.  Entire field is read into memory.</td></tr><tr><td><tt class="literal">BinaryBlob</tt></td><td><tt class="literal">System.Byte[]</tt></td><td><tt class="literal">DbType.Binary</tt></td><td><tt class="literal">type="BinaryBlob"</tt> must be specified.  Entire field is read into memory.</td></tr><tr><td><tt class="literal">Serializable</tt></td><td>Any <tt class="literal">System.Object</tt> that is marked with SerializableAttribute.</td><td><tt class="literal">DbType.Binary</tt></td><td><tt class="literal">type="Serializable"</tt> should be specified.  This is the fallback type
                            if no NHibernate Type can be found for the Property.</td></tr><tr><td><tt class="literal">XDoc</tt></td><td><tt class="literal">System.Xml.Linq.XDocument</tt></td><td><tt class="literal">DbType.Xml</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.  Entire field is read into memory.</td></tr><tr><td><tt class="literal">XmlDoc</tt></td><td><tt class="literal">System.Xml.XmlDocument</tt></td><td><tt class="literal">DbType.Xml</tt></td><td>Default when no <tt class="literal">type</tt> attribute specified.  Entire field is read into memory.</td></tr></tbody></table></div><p>
                NHibernate supports some additional type names for compatibility with Java's Hibernate (useful for those coming over from
                Hibernate or using some of the tools to generate <tt class="literal">hbm.xml</tt> files).
                A <tt class="literal">type="integer"</tt> or <tt class="literal">type="int"</tt> will map to an <tt class="literal">Int32</tt>
                NHibernate type, <tt class="literal">type="short"</tt> to an <tt class="literal">Int16</tt> NHibernateType.
                To see all of the conversions you can view the source of static constructor of the class
                <tt class="literal">NHibernate.Type.TypeFactory</tt>.
            </p><p>
                Default NHibernate types used when no <tt class="literal">type</tt> attribute is specified can be overridden by using
                the <tt class="literal">NHibernate.Type.TypeFactory.RegisterType</tt> static method before configuring and building
                session factories.
            </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-types-custom"></a>5.2.3.&nbsp;Custom value types</h3></div></div><div></div></div><p>
                It is relatively easy for developers to create their own value types. For example,
                you might want to persist properties of type <tt class="literal">Int64</tt>
                to <tt class="literal">VARCHAR</tt> columns. NHibernate does not provide a built-in type
                for this. But custom types are not limited to mapping a property (or collection element)
                to a single table column. So, for example, you might have a property
                <tt class="literal">Name { get; set; }</tt> of type
                <tt class="literal">String</tt> that is persisted to the columns
                <tt class="literal">FIRST_NAME</tt>, <tt class="literal">INITIAL</tt>, <tt class="literal">SURNAME</tt>.
            </p><p>
                To implement a custom type, implement either <tt class="literal">NHibernate.UserTypes.IUserType</tt>
                or <tt class="literal">NHibernate.UserTypes.ICompositeUserType</tt> and declare properties using the
                fully qualified name of the type. Check out
                <tt class="literal">NHibernate.DomainModel.DoubleStringType</tt> to see the kind of things that
                are possible.
            </p><pre class="programlisting">&lt;property name="TwoStrings"
    type="NHibernate.DomainModel.DoubleStringType, NHibernate.DomainModel"&gt;
    &lt;column name="first_string"/&gt;
    &lt;column name="second_string"/&gt;
&lt;/property&gt;</pre><p>
                Notice the use of <tt class="literal">&lt;column&gt;</tt> tags to map a property to multiple
                columns.
            </p><p>
                The <tt class="literal">IEnhancedUserType</tt>, <tt class="literal">IUserVersionType</tt>,
                and <tt class="literal">IUserCollectionType</tt> interfaces provide support for more specialized
                uses. The later is to be used with collections, see <a href="collections.html#collections-persistent" title="6.1.&nbsp;Persistent Collections">Section&nbsp;6.1, &#8220;Persistent Collections&#8221;</a>.
            </p><p>
                You may even supply parameters to an <tt class="literal">IUserType</tt> in the mapping file. To
                do this, your <tt class="literal">IUserType</tt> must implement the
                <tt class="literal">NHibernate.UserTypes.IParameterizedType</tt> interface. To supply parameters
                to your custom type, you can use the <tt class="literal">&lt;type&gt;</tt> element in your mapping
                files.
            </p><pre class="programlisting">&lt;property name="priority"&gt;
    &lt;type name="MyCompany.UserTypes.DefaultValueIntegerType"&gt;
        &lt;param name="default"&gt;0&lt;/param&gt;
    &lt;/type&gt;
&lt;/property&gt;</pre><p>
                The <tt class="literal">IUserType</tt> can now retrieve the value for the parameter named 
                <tt class="literal">default</tt> from the <tt class="literal">IDictionary</tt> object passed to it.
            </p><p>
                If you use a certain <tt class="literal">UserType</tt> very often, it may be useful to define a
                shorter name for it. You can do this using the <tt class="literal">&lt;typedef&gt;</tt> element.
                Typedefs assign a name to a custom type, and may also contain a list of default
                parameter values if the type is parameterized.
            </p><pre class="programlisting">&lt;typedef class="MyCompany.UserTypes.DefaultValueIntegerType" name="default_zero"&gt;
    &lt;param name="default"&gt;0&lt;/param&gt;
&lt;/typedef&gt;</pre><pre class="programlisting">&lt;property name="priority" type="default_zero"/&gt;</pre><p>
                It is also possible to override the parameters supplied in a typedef on a case-by-case basis
                by using type parameters on the property mapping.
            </p><p>
                Even though NHibernate's rich range of built-in types and support for components means you
                will very rarely <span class="emphasis"><em>need</em></span> to use a custom type, it is nevertheless
                considered good form to use custom types for (non-entity) classes that occur frequently
                in your application. For example, a <tt class="literal">MonetaryAmount</tt> class is a good
                candidate for an <tt class="literal">ICompositeUserType</tt>, even though it could easily be mapped
                as a component. One motivation for this is abstraction. With a custom type, your mapping
                documents would be future-proofed against possible changes in your way of representing
                monetary values.
            </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-entityname"></a>5.3.&nbsp;Mapping a class more than once</h2></div></div><div></div></div><p>
            It is possible to provide more than one mapping for a particular persistent class. In this case,
            you must specify an <span class="emphasis"><em>entity name</em></span> to disambiguate between instances of the two
            mapped entities. By default, the entity name is the same as the class name. NHibernate lets you
            specify the entity name when working with persistent objects, when writing queries, or when
            mapping associations to the named entity. 
        </p><pre class="programlisting">&lt;class name="Contract" table="Contracts"
        entity-name="CurrentContract"&gt;
    ...
    &lt;set name="History" inverse="true"
            order-by="effectiveEndDate desc"&gt;
        &lt;key column="currentContractId"/&gt;
        &lt;one-to-many entity-name="HistoricalContract"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Contract" table="ContractHistory"
        entity-name="HistoricalContract"&gt;
    ...
    &lt;many-to-one name="CurrentContract"
            column="currentContractId"
            entity-name="CurrentContract"/&gt;
&lt;/class&gt;</pre><p>
            Associations are now specified using <tt class="literal">entity-name</tt> instead of
            <tt class="literal">class</tt>.
        </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-quotedidentifiers"></a>5.4.&nbsp;SQL quoted identifiers</h2></div></div><div></div></div><p>
            You may force NHibernate to quote an identifier in the generated SQL by enclosing the table or
            column name in back-ticks in the mapping document. NHibernate will use the correct quotation
            style for the SQL <tt class="literal">Dialect</tt> (usually double quotes, but brackets for SQL
            Server and back-ticks for MySQL).
        </p><pre class="programlisting">&lt;class name="LineItem" table="`Line Item`"&gt;
    &lt;id name="Id" column="`Item Id`"&gt;
        &lt;generator class="assigned"/&gt;
    &lt;/id&gt;
    &lt;property name="ItemNumber" column="`Item #`"/&gt;
    ...
&lt;/class&gt;</pre><p>
            Quoting column identifiers is required if a table contains two columns differing only by case.
            Ensure you use consistent casing when quoting identifiers.
        </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-modularfiles"></a>5.5.&nbsp;Modular mapping files</h2></div></div><div></div></div><p>
            It is possible to define <tt class="literal">subclass</tt> and <tt class="literal">joined-subclass</tt>
            mappings in separate mapping documents, directly beneath <tt class="literal">hibernate-mapping</tt>.
            This allows you to extend a class hierarchy just by adding a new mapping file. You must
            specify an <tt class="literal">extends</tt> attribute in the subclass mapping, naming a previously
            mapped superclass.
        </p><pre class="programlisting">
&lt;hibernate-mapping&gt;
    &lt;subclass name="Eg.Subclass.DomesticCat, Eg"
        extends="Eg.Cat, Eg" discriminator-value="D"&gt;

        &lt;property name="name" type="string"/&gt;
    &lt;/subclass&gt;
&lt;/hibernate-mapping&gt;</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-generated"></a>5.6.&nbsp;Generated Properties</h2></div></div><div></div></div><p>
            Generated properties are properties which have their values generated by the
            database.  Typically, NHibernate applications needed to <tt class="literal">Refresh</tt>
            objects which contain any properties for which the database was generating values.
            Marking properties as generated, however, lets the application delegate this
            responsibility to NHibernate.  Essentially, whenever NHibernate issues an SQL INSERT
            or UPDATE for an entity which has defined generated properties, it immediately
            issues a select afterwards to retrieve the generated values.
        </p><p>
            Properties marked as generated must additionally be non-insertable and non-updatable.
            Only <a href="mapping.html#mapping-declaration-version" title="5.1.8.&nbsp;version (optional)">versions</a>,
            <a href="mapping.html#mapping-declaration-timestamp" title="5.1.9.&nbsp;timestamp (optional)">timestamps</a>, and
            <a href="mapping.html#mapping-declaration-property" title="5.1.10.&nbsp;property">simple properties</a> can be marked as
            generated.
        </p><p>
            <tt class="literal">never</tt> (the default) - means that the given property value
            is not generated within the database.
        </p><p>
            <tt class="literal">insert</tt> - states that the given property value is generated on
            insert, but is not regenerated on subsequent updates.  Things like created-date would
            fall into this category.  Note that even though
            <a href="mapping.html#mapping-declaration-version" title="5.1.8.&nbsp;version (optional)">version</a> and
            <a href="mapping.html#mapping-declaration-timestamp" title="5.1.9.&nbsp;timestamp (optional)">timestamp</a> properties can
            be marked as generated, this option is not available for them.
        </p><p>
            <tt class="literal">always</tt> - states that the property value is generated both
            on insert and on update.
        </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-database-object"></a>5.7.&nbsp;Auxiliary Database Objects</h2></div></div><div></div></div><p>
            Auxiliary database objects allow CREATE and DROP of arbitrary database objects. In
            conjunction with NHibernate's schema evolution tools, they have the ability to fully
            define a user schema within the NHibernate mapping files. Although designed specifically
            for creating and dropping things like triggers or stored procedures, any SQL command
            that can be run via a <tt class="literal">DbCommand.ExecuteNonQuery()</tt> method is valid
            (for example, ALTERs, INSERTS, etc.). There are essentially two modes for defining
            auxiliary database objects:
        </p><p>
            The first mode is to explicitly list the CREATE and DROP commands in the mapping file:
        </p><pre class="programlisting">&lt;nhibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;create&gt;CREATE TRIGGER my_trigger ...&lt;/create&gt;
        &lt;drop&gt;DROP TRIGGER my_trigger&lt;/drop&gt;
    &lt;/database-object&gt;
&lt;/nhibernate-mapping&gt;</pre><p>
            The second mode is to supply a custom class that constructs the
            CREATE and DROP commands.  This custom class must implement the
            <tt class="literal">NHibernate.Mapping.IAuxiliaryDatabaseObject</tt> interface.
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;definition class="MyTriggerDefinition, MyAssembly"/&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre><p>
            You may also specify parameters to be passed to the database object:
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;definition class="MyTriggerDefinition, MyAssembly"&gt;
            &lt;param name="parameterName"&gt;parameterValue&lt;/param&gt;
        &lt;/definition&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre><p>
            NHibernate will call <tt class="literal">IAuxiliaryDatabaseObject.SetParameterValues</tt>
            passing it a dictionary of parameter names and values.
        </p><p>
            Additionally, these database objects can be optionally scoped such that they only
            apply when certain dialects are used.
        </p><pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;definition class="MyTriggerDefinition"/&gt;
        &lt;dialect-scope name="NHibernate.Dialect.Oracle9iDialect"/&gt;
        &lt;dialect-scope name="NHibernate.Dialect.Oracle8iDialect"/&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping-meta"></a>5.8.&nbsp;Meta data</h2></div></div><div></div></div><p>
            You may declare additional metadata in your mappings by using the <tt class="literal">meta</tt> element. This element
            can be added to the main mapping elements.
        </p><div class="programlistingco"><pre class="programlisting">&lt;meta
    attribute="metaName"                              <span class="co">(1)</span>
    inherit="true|false"                              <span class="co">(2)</span>
    &gt;metaData&lt;/meta&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>
                        <tt class="literal">attribute</tt>: The name of the metadata.
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>
                        <tt class="literal">inherit</tt> (optional - defaults to <tt class="literal">true</tt>):
                        Whether the metadata is inherited by mapping sub-elements or not.
                    </p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p>
                        The text content of the meta element is its data.
                    </p></td></tr></table></div></div><p>
            The metadata can be retrieved at runtime from the <a href="manipulatingdata.html#manipulatingdata-metadata" title="10.12.&nbsp;Metadata API">Section&nbsp;10.12, &#8220;Metadata API&#8221;</a>.
        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="persistent-classes.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="collections.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;4.&nbsp;Persistent Classes&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;6.&nbsp;Collection Mapping</td></tr></table></div>{% include google_analytics.html %}</body></html>